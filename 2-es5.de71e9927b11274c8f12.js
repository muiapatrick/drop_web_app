function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(c){r=!0,o=c}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,i=_getPrototypeOf(e);if(t){var r=_getPrototypeOf(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{BCCV:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("AytR"),r=n("tk/3"),o=n("2Vo4"),a=n("z6cu"),s=n("JIr8"),c=n("fXoL"),u=n("5eHb"),l=function(){var e=function(){function e(t,n){_classCallCheck(this,e),this._httpClient=t,this._toastr=n,this.baseUrl=i.a.base_url,this.shopIdSource=new o.a("default message"),this.shopId=this.shopIdSource.asObservable(),this.openShopsChange=new o.a(null),this.nearOpenShop=this.openShopsChange.asObservable()}return _createClass(e,[{key:"createShop",value:function(e){return this._httpClient.post(this.baseUrl+"shop",e)}},{key:"updateShop",value:function(e,t){return this._httpClient.put(this.baseUrl+"shop/"+e,t)}},{key:"getShops",value:function(e,t,n,i,o,c){var u=this,l=(new r.e).set("page",e).set("page_size",t);return null!=o&&(l=l.append("shop_name",o)),null!=i&&(l=l.append("ids",i)),null!=n&&(l=l.append("operator_id",n)),null!=c&&(l=l.append("shop_number",c)),this._httpClient.get(this.baseUrl+"shop",{params:l}).pipe(Object(s.a)((function(e){if(e.error instanceof ErrorEvent);else{if(500===e.status)return u._toastr.error("An error occurred while getting shops"),Object(a.a)(e);if(401===e.status)return Object(a.a)(e);if(0===e.status)return u._toastr.error("Something went wrong, Please try again later"),Object(a.a)(e)}return u._toastr.error(e.error.api_code_description),Object(a.a)(e)})))}},{key:"changeShopId",value:function(e){this.shopIdSource.next(e)}},{key:"changeOpenShops",value:function(e){console.log("CHANGE SHOPS"),console.log(e),this.openShopsChange.next(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.cc(r.b),c.cc(u.b))},e.\u0275prov=c.Ob({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},P6yk:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("AytR"),r=n("2Vo4"),o=n("z6cu"),a=n("tk/3"),s=n("JIr8"),c=n("fXoL"),u=n("5eHb"),l=function(){var e=function(){function e(t,n){_classCallCheck(this,e),this._httpClient=t,this._toastr=n,this.baseUrl=i.a.base_url,this.itemData=new r.a(null),this.currentItemData=this.itemData.asObservable(),this.itemStatus=new r.a(null),this.currentItemStatus=this.itemStatus.asObservable(),this.itemAction=new r.a(null),this.currentItemAction=this.itemAction.asObservable(),this.shopLocation=new r.a(null),this.selectedShopLoc=this.shopLocation.asObservable()}return _createClass(e,[{key:"setItemData",value:function(e){this.itemData.next(e)}},{key:"setItemStatus",value:function(e){this.itemStatus.next(e)}},{key:"setItemAction",value:function(e){this.itemAction.next(e)}},{key:"setShopLocation",value:function(e){this.shopLocation.next(e)}},{key:"dropItem",value:function(e){return this._httpClient.post(this.baseUrl+"drop",e)}},{key:"updateItem",value:function(e,t){return this._httpClient.put(this.baseUrl+"drop/"+e,t)}},{key:"updateItemStatus",value:function(e,t){return this._httpClient.put(this.baseUrl+"drop/status/"+e,t)}},{key:"payItem",value:function(e,t){return this._httpClient.post(this.baseUrl+"fund/pay/"+e,t)}},{key:"getItems",value:function(e,t,n,i,r,c,u,l){var d=this,p=(new a.e).set("page",e).set("page_size",t);return null!=n&&(p=p.append("user_id",n)),null!=i&&(p=p.append("shop_id",i)),null!=r&&null!=c&&(p=p.append(r,c)),null!=u&&null!=u&&(p=p.append("statuses",u)),null!=l&&(p=p.append("shop_number",l)),this._httpClient.get(this.baseUrl+"drop",{params:p}).pipe(Object(s.a)((function(e){if(e.error instanceof ErrorEvent);else{if(500===e.status)return d._toastr.error("An error occurred while getting shops"),Object(o.a)(e);if(401===e.status)return Object(o.a)(e);if(0===e.status)return d._toastr.error("Something went wrong, Please try again later"),Object(o.a)(e)}return Object(o.a)(e)})))}},{key:"getDropStats",value:function(e,t,n){var i=this,r=new a.e;return null!=e&&(r=r.append("shop_id",e)),null!=t&&(r=r.append("shop_number",t)),null!=n&&(r=r.append("week_date",n)),this._httpClient.get(this.baseUrl+"drop/stats",{params:r}).pipe(Object(s.a)((function(e){if(e.error instanceof ErrorEvent);else{if(500===e.status)return i._toastr.error("An error occurred while getting shop drop statistics"),Object(o.a)(e);if(401===e.status)return Object(o.a)(e);if(0===e.status)return i._toastr.error("Something went wrong, Please try again later"),Object(o.a)(e)}return Object(o.a)(e)})))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.cc(a.b),c.cc(u.b))},e.\u0275prov=c.Ob({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},SJ6J:function(e,t,n){"use strict";n.d(t,"a",(function(){return N}));var i=n("3Pt+"),r=n("lSn3"),o=n("fXoL"),a=n("ZZCA"),s=n("5eHb"),c=n("P6yk"),u=n("ofXK");function l(e,t){1&e&&(o.Yb(0,"h4",19),o.Mc(1,"Pick"),o.Xb())}function d(e,t){1&e&&(o.Yb(0,"h4",19),o.Mc(1,"Make Payment"),o.Xb())}function p(e,t){1&e&&(o.Yb(0,"h4",19),o.Mc(1,"Accept"),o.Xb())}function h(e,t){1&e&&(o.Yb(0,"h4",19),o.Mc(1,"Release"),o.Xb())}function f(e,t){if(1&e){var n=o.Zb();o.Yb(0,"div",15),o.Kc(1,l,2,0,"h4",16),o.Kc(2,d,2,0,"h4",16),o.Kc(3,p,2,0,"h4",16),o.Kc(4,h,2,0,"h4",16),o.Yb(5,"button",17),o.gc("click",(function(){return o.Ec(n),o.kc().closeModal()})),o.Yb(6,"span",18),o.Mc(7,"\xd7"),o.Xb(),o.Xb(),o.Xb()}if(2&e){var i=o.kc();o.Db(1),o.qc("ngIf","pick"==i.action),o.Db(1),o.qc("ngIf","pay"==i.action),o.Db(1),o.qc("ngIf","accept"==i.action),o.Db(1),o.qc("ngIf","release"==i.action)}}function b(e,t){1&e&&(o.Yb(0,"h4",19),o.Mc(1,"Cancel Drop Request"),o.Xb())}function m(e,t){1&e&&(o.Yb(0,"h4",19),o.Mc(1,"Decline"),o.Xb())}function g(e,t){if(1&e){var n=o.Zb();o.Yb(0,"div",20),o.Kc(1,b,2,0,"h4",16),o.Kc(2,m,2,0,"h4",16),o.Yb(3,"button",17),o.gc("click",(function(){return o.Ec(n),o.kc().closeModal()})),o.Yb(4,"span",18),o.Mc(5,"\xd7"),o.Xb(),o.Xb(),o.Xb()}if(2&e){var i=o.kc();o.Db(1),o.qc("ngIf","cancel"==i.action),o.Db(1),o.qc("ngIf","decline"==i.action)}}function v(e,t){1&e&&(o.Yb(0,"div",7),o.Yb(1,"div",21),o.Yb(2,"h2"),o.Mc(3,"Are you sure you want to pick?"),o.Xb(),o.Xb(),o.Xb())}function _(e,t){1&e&&(o.Yb(0,"div",24),o.Yb(1,"div",25),o.Tb(2,"input",30),o.Yb(3,"label",31),o.Yb(4,"strong"),o.Mc(5,"Cash"),o.Xb(),o.Xb(),o.Xb(),o.Xb()),2&e&&(o.Db(2),o.qc("value",1))}function y(e,t){if(1&e&&(o.Yb(0,"div",7),o.Yb(1,"div",22),o.Yb(2,"h2"),o.Mc(3,"Payment Mode"),o.Xb(),o.Xb(),o.Kc(4,_,6,1,"div",23),o.Yb(5,"div",24),o.Yb(6,"div",25),o.Tb(7,"input",26),o.Yb(8,"label",27),o.Yb(9,"strong"),o.Mc(10,"Mpesa"),o.Xb(),o.Xb(),o.Xb(),o.Xb(),o.Yb(11,"div",24),o.Yb(12,"div",25),o.Tb(13,"input",28),o.Yb(14,"label",29),o.Yb(15,"strong"),o.Mc(16,"Wallet"),o.Xb(),o.Xb(),o.Xb(),o.Xb(),o.Xb()),2&e){var n=o.kc();o.Db(4),o.qc("ngIf",3!=n.item.status.id),o.Db(3),o.qc("value",2),o.Db(6),o.qc("value",3)}}function k(e,t){1&e&&(o.Yb(0,"div",7),o.Yb(1,"div",21),o.Yb(2,"h2"),o.Mc(3,"Are you sure you want to cancel?"),o.Xb(),o.Xb(),o.Xb())}function C(e,t){1&e&&(o.Yb(0,"div",7),o.Yb(1,"div",32),o.Yb(2,"h2"),o.Mc(3,"Paid"),o.Xb(),o.Xb(),o.Yb(4,"div",33),o.Yb(5,"div",25),o.Tb(6,"input",34),o.Yb(7,"label",35),o.Yb(8,"strong"),o.Mc(9,"Yes"),o.Xb(),o.Xb(),o.Xb(),o.Yb(10,"div",25),o.Tb(11,"input",36),o.Yb(12,"label",37),o.Yb(13,"strong"),o.Mc(14,"No"),o.Xb(),o.Xb(),o.Xb(),o.Xb(),o.Xb()),2&e&&(o.Db(6),o.qc("value",!0),o.Db(5),o.qc("value",!1))}function w(e,t){1&e&&(o.Yb(0,"div",7),o.Yb(1,"div",21),o.Yb(2,"h2"),o.Mc(3,"Are you sure you want to decline?"),o.Xb(),o.Xb(),o.Xb())}function I(e,t){if(1&e&&(o.Yb(0,"div",7),o.Yb(1,"div",21),o.Yb(2,"h2",38),o.Mc(3),o.Xb(),o.Xb(),o.Xb()),2&e){var n=o.kc();o.Db(3),o.Nc(n.insufficient_wallet_balance_msg)}}function O(e,t){if(1&e&&(o.Yb(0,"div",7),o.Yb(1,"div",21),o.Yb(2,"h2",38),o.Mc(3),o.Xb(),o.Xb(),o.Xb()),2&e){var n=o.kc();o.Db(3),o.Oc("Please wait for MPesa Push on phone number ",n.mpesa_phoneno," and enter your pin to complete the payment.")}}function M(e,t){if(1&e&&(o.Yb(0,"h2"),o.Yb(1,"small",38),o.Mc(2),o.Xb(),o.Xb()),2&e){var n=o.kc(2);o.Db(2),o.Nc(n.payment_required_msg)}}function A(e,t){if(1&e&&(o.Yb(0,"div",7),o.Yb(1,"div",21),o.Yb(2,"h2"),o.Mc(3,"Are you sure you want to Release The Item?"),o.Xb(),o.Kc(4,M,3,1,"h2",39),o.Xb(),o.Xb()),2&e){var n=o.kc();o.Db(4),o.qc("ngIf","release"==n.action&&n.item_payment_required)}}function S(e,t){1&e&&(o.Yb(0,"mdb-error"),o.Mc(1,"Please enter valid release number"),o.Xb())}function P(e,t){if(1&e&&(o.Yb(0,"div",7),o.Tb(1,"div",8),o.Yb(2,"div",9),o.Yb(3,"div",40),o.Tb(4,"input",41),o.Yb(5,"label",42),o.Mc(6,"Release Number"),o.Xb(),o.Kc(7,S,2,0,"mdb-error",39),o.Xb(),o.Xb(),o.Xb()),2&e){var n=o.kc();o.Db(7),o.qc("ngIf",n.isInvalidReleaseNumber)}}function X(e,t){if(1&e&&(o.Yb(0,"mdb-error"),o.Mc(1),o.Xb()),2&e){var n=o.kc(2);o.Db(1),o.Nc(n.amount_err_msg)}}function D(e,t){if(1&e&&(o.Yb(0,"div",7),o.Tb(1,"div",8),o.Yb(2,"div",9),o.Yb(3,"div",40),o.Tb(4,"input",43),o.Yb(5,"label",44),o.Mc(6,"Paid Amount"),o.Xb(),o.Kc(7,X,2,1,"mdb-error",39),o.Xb(),o.Xb(),o.Xb()),2&e){var n=o.kc();o.Db(7),o.qc("ngIf",n.is_paid&&n.isInvalidAmount)}}function Y(e,t){1&e&&(o.Yb(0,"mdb-error"),o.Mc(1,"Please enter valid mpesa phone"),o.Xb())}function T(e,t){if(1&e&&(o.Yb(0,"div",7),o.Tb(1,"div",8),o.Yb(2,"div",9),o.Yb(3,"div",40),o.Tb(4,"input",45),o.Yb(5,"label",46),o.Mc(6,"Mpesa Phone"),o.Xb(),o.Kc(7,Y,2,0,"mdb-error",39),o.Xb(),o.Xb(),o.Xb()),2&e){var n=o.kc();o.Db(7),o.qc("ngIf",n.isInvalidPhoneNumber)}}function E(e,t){if(1&e){var n=o.Zb();o.Yb(0,"button",47),o.gc("click",(function(){return o.Ec(n),o.kc().updateItemStatus("3","picked")})),o.Mc(1,"Pick "),o.Xb()}if(2&e){var i=o.kc();o.qc("disabled",!i.dropActionForm.valid)}}function x(e,t){if(1&e){var n=o.Zb();o.Yb(0,"button",48),o.gc("click",(function(){return o.Ec(n),o.kc().updateItemStatus("4","cancelled")})),o.Mc(1,"Cancel "),o.Xb()}if(2&e){var i=o.kc();o.qc("disabled",!i.dropActionForm.valid)}}function W(e,t){if(1&e){var n=o.Zb();o.Yb(0,"button",47),o.gc("click",(function(){return o.Ec(n),o.kc().makePayment("payment")})),o.Mc(1,"Proceed "),o.Xb()}if(2&e){var i=o.kc();o.qc("disabled",!i.dropActionForm.valid)}}function z(e,t){if(1&e){var n=o.Zb();o.Yb(0,"button",47),o.gc("click",(function(){return o.Ec(n),o.kc().updateItemStatus("2","accepted")})),o.Mc(1,"Accept "),o.Xb()}if(2&e){var i=o.kc();o.qc("disabled",!i.dropActionForm.valid)}}function L(e,t){if(1&e){var n=o.Zb();o.Yb(0,"button",48),o.gc("click",(function(){return o.Ec(n),o.kc().updateItemStatus("7","declined")})),o.Mc(1,"Decline "),o.Xb()}if(2&e){var i=o.kc();o.qc("disabled",!i.dropActionForm.valid)}}function B(e,t){if(1&e){var n=o.Zb();o.Yb(0,"button",47),o.gc("click",(function(){return o.Ec(n),o.kc().updateItemStatus("5","released")})),o.Mc(1,"Release "),o.Xb()}if(2&e){var i=o.kc();o.qc("disabled",!i.dropActionForm.valid||!i.valid_release_number||!i.is_enough_amount||i.item_payment_required)}}var N=function(){var e=function(){function e(t,n,i,r){_classCallCheck(this,e),this.modalRef=t,this._formBuilder=n,this._toastr=i,this._dropService=r,this.action=null,this.item=null,this.is_enough_amount=!0,this.payment_required_msg="Payment Required before Item is released!!",this.amount_err_msg="Please enter valid amount",this.insufficient_wallet_balance_msg=""}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;console.log(this.action),console.log(this.item),this.dropActionForm=this._formBuilder.group({is_paid:"",paid_amount:"",payment_mode:"",mpesa_phone:"",release_number:""}),this.dropActionForm.get("is_paid").setValue(!1),this.dropActionForm.get("payment_mode").setValue(1),"release"==this.action&&(this.item_payment_required=this.item.payment_required,this.applyAcceptFrmControlValidators("release_number",[i.s.required,r.b])),this.dropActionForm.controls.release_number.valueChanges.subscribe((function(t){e.valid_release_number=t==e.item.release_number})),this.dropActionForm.controls.is_paid.valueChanges.subscribe((function(t){e.is_paid=null!=t&&t,e.is_paid?e.applyAcceptFrmControlValidators("paid_amount",[i.s.required,r.b,r.a]):e.disableAcceptFrmControlValidators("paid_amount")})),this.dropActionForm.controls.paid_amount.valueChanges.subscribe((function(t){"release"==e.action&&null!=t&&t<e.item.total_cost_unpaid?(e.is_enough_amount=!1,e.item_payment_required=!0,e.payment_required_msg="Enough payment amount required",e.amount_err_msg=e.payment_required_msg):"release"==e.action&&null!=t&&t>=e.item.total_cost_unpaid&&(e.is_enough_amount=!0,e.item_payment_required=!1,e.payment_required_msg="",e.amount_err_msg="")})),this.dropActionForm.controls.payment_mode.valueChanges.subscribe((function(t){console.log(t),e.pay_mode=null==t?1:t,2==e.pay_mode?e.applyAcceptFrmControlValidators("mpesa_phone",[i.s.required,r.b,r.d]):e.disableAcceptFrmControlValidators("mpesa_phone")}))}},{key:"isAcceptFormTouched",value:function(e){return this.dropActionForm.controls[e].touched}},{key:"isAcceptFormInValid",value:function(e,t){return this.dropActionForm.controls[e].hasError(t)}},{key:"applyAcceptFrmControlValidators",value:function(e,t){this.dropActionForm.controls[e].setValidators(t),this.dropActionForm.controls[e].updateValueAndValidity()}},{key:"disableAcceptFrmControlValidators",value:function(e){this.dropActionForm.controls[e].reset(),this.dropActionForm.controls[e].markAsUntouched(),this.dropActionForm.controls[e].clearValidators(),this.dropActionForm.controls[e].updateValueAndValidity()}},{key:"closeModal",value:function(){this.dropActionForm.reset(),this.modalRef.hide()}},{key:"updateItemStatus",value:function(e,t){var n=this;if(console.log("STATUS :: "+e),console.log("PAYMNET REQUIRED :: "+this.item.payment_required),"3"==e&&this.item.payment_required)this.makePayment(t);else{var i={status_id:e,is_paid:this.dropActionForm.get("is_paid").value,amount_paid:this.dropActionForm.get("paid_amount").value};this._dropService.updateItemStatus(this.item.id.toString(),i).subscribe((function(e){n._toastr.success("Item "+t+" successful","SUCCESSFULL"),n.closeModal()}),(function(e){console.log("RES STATUS :: "+e.status),400==e.status&&n._toastr.error("Invalid Request Parameters not permitted"),409==e.status&&n._toastr.error(e.error.api_code_description),console.log(e)}))}}},{key:"makePayment",value:function(e){var t=this,n={amount:this.item.total_cost_unpaid.toString(),payment_modeid:this.dropActionForm.get("payment_mode").value,mpesa_phone:this.dropActionForm.get("mpesa_phone").value};this._dropService.payItem(this.item.id.toString(),n).subscribe((function(n){t._toastr.success("Item "+e+" successful","SUCCESSFULL"),t.insufficient_wallet_balance=!1,t.insufficient_wallet_balance_msg="",2==t.dropActionForm.get("payment_mode").value?(t.show_mpesa_instructions=!0,t.mpesa_phoneno=t.dropActionForm.get("mpesa_phone").value):(t.show_mpesa_instructions=!1,t.mpesa_phoneno=null,t.closeModal())}),(function(e){400==e.status&&t._toastr.error("Invalid Request Parameters not permitted"),409==e.status&&t._toastr.error(e.error.api_code_description),402==e.status&&(t.insufficient_wallet_balance=!0,t.insufficient_wallet_balance_msg=e.error.api_code_description,t._toastr.error(e.error.api_code_description)),console.log(e)}))}},{key:"isInvalidAmount",get:function(){return(this.isAcceptFormInValid("paid_amount","required")||this.isAcceptFormInValid("paid_amount","hasWhiteSpace")||this.isAcceptFormInValid("paid_amount","invalidAmount")||!this.is_enough_amount)&&this.isAcceptFormTouched("paid_amount")}},{key:"isInvalidReleaseNumber",get:function(){return(this.isAcceptFormInValid("release_number","required")||this.isAcceptFormInValid("release_number","hasWhiteSpace")||!this.valid_release_number)&&this.isAcceptFormTouched("release_number")}},{key:"isInvalidPhoneNumber",get:function(){return(this.isAcceptFormInValid("mpesa_phone","required")||this.isAcceptFormInValid("mpesa_phone","hasWhiteSpace")||this.isAcceptFormInValid("mpesa_phone","invalidPhone"))&&this.isAcceptFormTouched("mpesa_phone")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.Sb(a.t),o.Sb(i.c),o.Sb(s.b),o.Sb(c.a))},e.\u0275cmp=o.Mb({type:e,selectors:[["app-drop-action"]],decls:30,vars:20,consts:[["class","modal-header mdb-tabcolor white-text","style","background-color: #0f7254 !important;",4,"ngIf"],["class","modal-header mdb-tabcolor white-text","style","background-color: rgba(214, 53, 53) !important;",4,"ngIf"],[1,"modal-body","text-center"],[1,"card"],[1,"card-body","pt-0"],[3,"formGroup"],["class","row",4,"ngIf"],[1,"row"],[1,"col-sm-1","col-md-1","col-lg-1"],[1,"col-sm-9","col-md-9","col-lg-9","text-center"],[1,"text-center","form-sm","mt-2"],["mdbBtn","","color","success","outline","true","rounded","true","block","true","class","waves-effect mb-5 ml-1","mdbWavesEffect","","type","submit",3,"disabled","click",4,"ngIf"],["mdbBtn","","color","danger","outline","true","rounded","true","block","true","class","waves-effect mb-5 ml-1","mdbWavesEffect","","type","submit",3,"disabled","click",4,"ngIf"],[1,"modal-footer"],["type","button","mdbBtn","","ronded","true","data-dismiss","modal","mdbWavesEffect","",1,"btn","btn-danger","btn-sm","btn-rounded","waves-effect","mx-3","px-4",3,"click"],[1,"modal-header","mdb-tabcolor","white-text",2,"background-color","#0f7254 !important"],["class","title",4,"ngIf"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"title"],[1,"modal-header","mdb-tabcolor","white-text",2,"background-color","rgba(214, 53, 53) !important"],[1,"col-sm-12","col-md-12","col-lg-12","text-center"],[1,"col-sm-4","col-md-4","col-lg-4"],["class","col-sm-2 col-md-2 col-lg-2",4,"ngIf"],[1,"col-sm-2","col-md-2","col-lg-2"],[1,"md-form","form-check","form-check-inline"],["type","radio","id","mpesaMode","name","payment_mode","formControlName","payment_mode","mdbInput","",1,"form-check-input",3,"value"],["for","mpesaMode",1,"form-check-label"],["type","radio","id","walletMode","name","payment_mode","formControlName","payment_mode","mdbInput","",1,"form-check-input",3,"value"],["for","walletMode",1,"form-check-label"],["type","radio","id","cashMode","name","payment_mode","formControlName","payment_mode","mdbInput","",1,"form-check-input",3,"value"],["for","cashMode",1,"form-check-label"],[1,"col-sm-2","col-md-2","col-lg-2","pull-right"],[1,"col-sm-6","col-md-6","col-lg-6","pull-left",2,"padding","0 !important"],["type","radio","id","paidYes","name","is_paid","formControlName","is_paid","mdbInput","",1,"form-check-input",3,"value"],["for","paidYes",1,"form-check-label"],["type","radio","id","paidNo","name","is_paid","formControlName","is_paid","mdbInput","",1,"form-check-input",3,"value"],["for","paidNo",1,"form-check-label"],[2,"color","#f44336"],[4,"ngIf"],[1,"md-form"],["id","release_number","type","text","mdbInput","","mdbValidate","","formControlName","release_number",1,"form-control","mt-2"],["for","release_number"],["id","paid_amount","type","text","mdbInput","","mdbValidate","","formControlName","paid_amount",1,"form-control","mt-2"],["for","paid_amount"],["id","mpesa_phone","type","text","mdbInput","","mdbValidate","","formControlName","mpesa_phone",1,"form-control","mt-2"],["for","mpesa_phone"],["mdbBtn","","color","success","outline","true","rounded","true","block","true","mdbWavesEffect","","type","submit",1,"waves-effect","mb-5","ml-1",3,"disabled","click"],["mdbBtn","","color","danger","outline","true","rounded","true","block","true","mdbWavesEffect","","type","submit",1,"waves-effect","mb-5","ml-1",3,"disabled","click"]],template:function(e,t){1&e&&(o.Kc(0,f,8,4,"div",0),o.Kc(1,g,6,2,"div",1),o.Yb(2,"div",2),o.Yb(3,"div",3),o.Yb(4,"div",4),o.Yb(5,"form",5),o.Kc(6,v,4,0,"div",6),o.Kc(7,y,17,3,"div",6),o.Kc(8,k,4,0,"div",6),o.Kc(9,C,15,2,"div",6),o.Kc(10,w,4,0,"div",6),o.Kc(11,I,4,1,"div",6),o.Kc(12,O,4,1,"div",6),o.Kc(13,A,5,1,"div",6),o.Kc(14,P,8,1,"div",6),o.Kc(15,D,8,1,"div",6),o.Kc(16,T,8,1,"div",6),o.Yb(17,"div",7),o.Tb(18,"div",8),o.Yb(19,"div",9),o.Yb(20,"div",10),o.Kc(21,E,2,1,"button",11),o.Kc(22,x,2,1,"button",12),o.Kc(23,W,2,1,"button",11),o.Kc(24,z,2,1,"button",11),o.Kc(25,L,2,1,"button",12),o.Kc(26,B,2,1,"button",11),o.Xb(),o.Xb(),o.Xb(),o.Xb(),o.Xb(),o.Xb(),o.Xb(),o.Yb(27,"div",13),o.Yb(28,"button",14),o.gc("click",(function(){return t.closeModal()})),o.Mc(29," Close "),o.Xb(),o.Xb()),2&e&&(o.qc("ngIf","pick"==t.action||"pay"==t.action||"accept"==t.action||"release"==t.action),o.Db(1),o.qc("ngIf","cancel"==t.action||"decline"==t.action),o.Db(4),o.qc("formGroup",t.dropActionForm),o.Db(1),o.qc("ngIf","pick"==t.action),o.Db(1),o.qc("ngIf","pick"==t.action&&t.item.payment_required||"pay"==t.action),o.Db(1),o.qc("ngIf","cancel"==t.action),o.Db(1),o.qc("ngIf","accept"==t.action||"release"==t.action||"accept"==t.action&&2==t.pay_mode),o.Db(1),o.qc("ngIf","decline"==t.action),o.Db(1),o.qc("ngIf",t.insufficient_wallet_balance),o.Db(1),o.qc("ngIf",t.show_mpesa_instructions),o.Db(1),o.qc("ngIf","release"==t.action),o.Db(1),o.qc("ngIf","release"==t.action),o.Db(1),o.qc("ngIf",("accept"==t.action||"release"==t.action)&&t.is_paid),o.Db(1),o.qc("ngIf",2==t.pay_mode&&!t.show_mpesa_instructions),o.Db(5),o.qc("ngIf","pick"==t.action),o.Db(1),o.qc("ngIf","cancel"==t.action),o.Db(1),o.qc("ngIf","pay"==t.action),o.Db(1),o.qc("ngIf","accept"==t.action),o.Db(1),o.qc("ngIf","decline"==t.action),o.Db(1),o.qc("ngIf","release"==t.action))},directives:[u.j,i.u,i.l,i.f,a.w,a.M,i.o,i.b,i.k,i.e,a.C,a.G,a.A],styles:[""]}),e}()},lSn3:function(e,t,n){"use strict";function i(e){if(e&&(null!=e.value||null!=e.value)){var t=e.value;return new RegExp("^((?!.*[\\s])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,}))").test(t)?null:{weak:!0}}}function r(e){if(e&&(null!=e.value||null!=e.value)){var t=e.value,n=e.root.get("password");return n&&n.value!==t?{notmatch:!0}:null}}function o(e){if(e&&(null!=e.value||null!=e.value)){var t=e.value,n=e.root.get("confirmPassword");return!n||null==n&&null==n||!n.value||null==n.value&&null==n.value||t===n.value||e.root.get("confirmPassword").setValue(""),null}}function a(e){if(e&&(null!=e.value||null!=e.value)){var t=e.value;return new RegExp("\\S").test(t)?null:{hasWhiteSpace:!0}}}function s(e){if(e&&(null!=e.value||null!=e.value)){var t=e.value;return new RegExp("^((254[0-9]{9})|(07[0-9]{8}))$").test(t)?null:{invalidPhone:!0}}}function c(e){if(e&&(null!=e||null!=e))return{validPhone:new RegExp("^((254[0-9]{9})|(07[0-9]{8}))$").test(e)}}function u(e){if(e&&(null!=e||null!=e))return{validNumeric:new RegExp("^-?(0|[1-9]\\d*)?$").test(e)}}function l(e){if(e&&(null!=e.value||null!=e.value)){var t=e.value;return new RegExp("^-?([0-9]|([0-9]\\d*).?([0-9]\\d*))?$").test(t)?null:{invalidAmount:!0}}}function d(e,t,n){return null!=e&&null!=e&&0!=e.length&&function(e,t){var n=[];return e.forEach((function(e){e.shop_id==t&&(n.push(e.id),n.slice())})),n}(e,n).includes(t)}function p(e,t){var n=null;return null==e||null==e||0==e.length||e.forEach((function(e){e.shop_number==t&&(n={id:e.id,is_open:e.is_open,user_id:e.user_id,shop_number:e.shop_number,shop_name:e.shop_name,shop_location:e.shop_location,phone_number:e.phone_number,latitude:e.latitude,longitude:e.longitude})})),n}n.d(t,"j",(function(){return i})),n.d(t,"g",(function(){return r})),n.d(t,"f",(function(){return o})),n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return l})),n.d(t,"i",(function(){return d})),n.d(t,"h",(function(){return p}))},pSwl:function(e,t,n){"use strict";n.d(t,"a",(function(){return Y}));var i=n("3Pt+"),r=n("0Tvr"),o=n("lSn3"),a=n("SJ6J"),s=n("fXoL"),c=n("P6yk"),u=n("4Q0Y"),l=n("5eHb"),d=n("ZZCA"),p=n("tyNb"),h=n("ofXK"),f=n("Lm2G");function b(e,t){if(1&e&&(s.Yb(0,"mdb-error"),s.Mc(1),s.Xb()),2&e){var n=s.kc();s.Db(1),s.Oc("Enter ",n.searchFieldBy.name," to search")}}function m(e,t){if(1&e&&(s.Yb(0,"option",25),s.Mc(1),s.Xb()),2&e){var n=t.$implicit;s.rc("value",n.v),s.Db(1),s.Nc(n.name)}}function g(e,t){1&e&&(s.Yb(0,"div",26),s.Yb(1,"div",27),s.Tb(2,"div",28),s.Xb(),s.Xb())}function v(e,t){1&e&&(s.Yb(0,"th",21),s.Mc(1,"Shop"),s.Xb())}function _(e,t){1&e&&(s.Yb(0,"th",21),s.Mc(1,"Release No"),s.Xb())}function y(e,t){if(1&e&&(s.Yb(0,"td"),s.Mc(1),s.Xb()),2&e){var n=s.kc().$implicit;s.Db(1),s.Nc(n.shop.shop_name)}}function k(e,t){if(1&e&&(s.Yb(0,"td"),s.Mc(1),s.Xb()),2&e){var n=s.kc().$implicit;s.Db(1),s.Nc(n.release_number)}}function C(e,t){if(1&e){var n=s.Zb();s.Yb(0,"a",36),s.gc("click",(function(){s.Ec(n);var e=s.kc(2).$implicit;return s.kc().editItem(e)})),s.Mc(1,"Edit"),s.Xb()}}function w(e,t){if(1&e){var n=s.Zb();s.Yb(0,"a",36),s.gc("click",(function(){s.Ec(n);var e=s.kc(2).$implicit;return s.kc().openDropActionModal("pick",e)})),s.Mc(1,"Pick"),s.Xb()}}function I(e,t){if(1&e){var n=s.Zb();s.Yb(0,"a",36),s.gc("click",(function(){s.Ec(n);var e=s.kc(2).$implicit;return s.kc().openDropActionModal("pay",e)})),s.Mc(1,"Pay"),s.Xb()}}function O(e,t){if(1&e){var n=s.Zb();s.Yb(0,"a",36),s.gc("click",(function(){s.Ec(n);var e=s.kc(2).$implicit;return s.kc().openDropActionModal("cancel",e)})),s.Mc(1,"Cancel"),s.Xb()}}function M(e,t){if(1&e&&(s.Yb(0,"div",31),s.Yb(1,"a",32),s.Tb(2,"i",33),s.Xb(),s.Yb(3,"div",34),s.Kc(4,C,2,0,"a",35),s.Kc(5,w,2,0,"a",35),s.Kc(6,I,2,0,"a",35),s.Kc(7,O,2,0,"a",35),s.Xb(),s.Xb()),2&e){var n=s.kc().$implicit;s.Db(4),s.qc("ngIf",1===n.status.id),s.Db(1),s.qc("ngIf",2===n.status.id),s.Db(1),s.qc("ngIf",!(1===n.status.id||4===n.status.id||5===n.status.id)&&n.payment_required),s.Db(1),s.qc("ngIf",1===n.status.id)}}function A(e,t){if(1&e){var n=s.Zb();s.Yb(0,"a",36),s.gc("click",(function(){s.Ec(n);var e=s.kc(2).$implicit;return s.kc().openDropActionModal("accept",e)})),s.Mc(1,"Accept"),s.Xb()}}function S(e,t){if(1&e){var n=s.Zb();s.Yb(0,"a",36),s.gc("click",(function(){s.Ec(n);var e=s.kc(2).$implicit;return s.kc().openDropActionModal("decline",e)})),s.Mc(1,"Decline"),s.Xb()}}function P(e,t){if(1&e){var n=s.Zb();s.Yb(0,"a",36),s.gc("click",(function(){s.Ec(n);var e=s.kc(2).$implicit;return s.kc().openDropActionModal("release",e)})),s.Mc(1,"Release"),s.Xb()}}function X(e,t){if(1&e&&(s.Yb(0,"div",31),s.Yb(1,"a",32),s.Tb(2,"i",33),s.Xb(),s.Yb(3,"div",34),s.Kc(4,A,2,0,"a",35),s.Kc(5,S,2,0,"a",35),s.Kc(6,P,2,0,"a",35),s.Xb(),s.Xb()),2&e){var n=s.kc().$implicit;s.Db(4),s.qc("ngIf",1===n.status.id),s.Db(1),s.qc("ngIf",1===n.status.id),s.Db(1),s.qc("ngIf",3===n.status.id)}}function D(e,t){if(1&e&&(s.Yb(0,"tr"),s.Yb(1,"td"),s.Mc(2),s.Xb(),s.Yb(3,"td"),s.Mc(4),s.Xb(),s.Yb(5,"td"),s.Mc(6),s.Xb(),s.Yb(7,"td"),s.Mc(8),s.Xb(),s.Kc(9,y,2,1,"td",11),s.Kc(10,k,2,1,"td",11),s.Yb(11,"td"),s.Mc(12),s.Xb(),s.Yb(13,"td"),s.Mc(14),s.Xb(),s.Yb(15,"td"),s.Mc(16),s.Xb(),s.Yb(17,"td"),s.Mc(18),s.Xb(),s.Yb(19,"td"),s.Mc(20),s.Xb(),s.Yb(21,"td",29),s.Kc(22,M,8,4,"div",30),s.Kc(23,X,7,3,"div",30),s.Xb(),s.Xb()),2&e){var n=t.$implicit,i=t.index,r=s.kc();s.Db(2),s.Oc("",r.itemNumber(i),"."),s.Db(2),s.Nc(n.item_name),s.Db(2),s.Nc(n.item_description),s.Db(2),s.Nc(n.item_type),s.Db(1),s.qc("ngIf",!r.is_shop_management),s.Db(1),s.qc("ngIf",!r.is_shop_management),s.Db(2),s.Nc(n.hours_stored),s.Db(2),s.Nc(n.total_cost),s.Db(2),s.Nc(n.total_cost_paid),s.Db(2),s.Nc(n.total_cost_unpaid),s.Db(2),s.Nc(n.status.name),s.Db(2),s.qc("ngIf",!(r.is_shop_management||4==n.status.id||5==n.status.id||3===n.status.id&&!n.payment_required)),s.Db(1),s.qc("ngIf",(1===n.status.id||3===n.status.id)&&r.is_shop_management)}}var Y=function(){var e=function(){function e(t,n,i,o,a,s,c){_classCallCheck(this,e),this._formBuilder=t,this._dropService=n,this._userService=i,this._toastr=o,this._modalService=a,this._router=s,this._route=c,this.page=new r.a,this.MAX_SIZE=3,this.itemStatuses=[{v:"item_name",name:"Item Name"},{v:"tag_number",name:"Tag Number"},{v:"release_number",name:"Release number"},{v:"1",name:"New Droppings"},{v:"2",name:"Dropped"},{v:"3",name:"Pick Request"},{v:"4",name:"Cancelled Droppings"},{v:"5",name:"Picked Items"}],this.searchFieldBy={v:"item_name",name:"item name"},this.searchFieldValue=null,this.statuses=null,this.userId=null,this.shopNumber=null,this.itemList=[]}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;console.log("ITEM LIST JERE"),this.page.pageNumber=0,this.routerPath=window.location.pathname.split("/").pop(),this._dropService.setItemAction(null),this._dropService.setItemData(null),console.log("PATH ::: "+this.routerPath),this.searchForm=this._formBuilder.group({search_field:["",i.s.compose([i.s.required])],filter_criteria:""}),this.searchForm.get("search_field").valueChanges.pipe().subscribe((function(t){e.page.pageNumber=0,e.page_changed=!1,e.searchForm.valid?(e.searchFieldValue=t,e.getItems()):(e.searchFieldValue=null,e.getItems())})),"list"==this.routerPath?this.userId=this._userService.getAuthenticatedUser().id.toString():"items"==this.routerPath?(this.is_shop_management=!0,this.shopNumber=this._route.snapshot.paramMap.get("id"),this.itemStatuses=[{v:"item_name",name:"Item Name"},{v:"tag_number",name:"Tag Number"},{v:"release_number",name:"Release number"},{v:"1",name:"New Droppings"},{v:"2",name:"Dropped"},{v:"3",name:"Pick Request"},{v:"5",name:"Picked Items"}],this._dropService.currentItemStatus.subscribe((function(t){e.statuses=t})),null!=this.statuses&&""!=this.statuses||(this.statuses="1,2,3,5,7"),console.log("STATUSES :: "+this.statuses)):this._router.navigate(["/drop"]),this.getItems(),this._modalService.closed.subscribe((function(){return e.getItems()}))}},{key:"isTouched",value:function(e){return this.searchForm.controls[e].touched}},{key:"isInValid",value:function(e,t){return this.searchForm.controls[e].hasError(t)}},{key:"onFilterCriteriaChange",value:function(e){Object(o.c)(e).validNumeric?(this.page.pageNumber=0,console.log("SEARCH STATUS "+e),this.statuses=e,console.log(this.statuses),this.getItems()):(this.searchFieldBy={v:e,name:e.replace("_"," ")},console.log("SEARCH BY "+e),this.statuses=null,this.searchForm.controls.search_field.reset())}},{key:"itemNumber",value:function(e){return this.page_changed?(this.page.pageNumber-1)*this.page.size+e+1:e+1}},{key:"pageChanged",value:function(e){console.log("EV PAGE :: "+e.page),console.log("PAGE NO :: "+this.page.pageNumber),this.page.pageNumber=e.page,console.log("PAGE NO :: "+this.page.pageNumber),this.page_changed=!0,this.getItems()}},{key:"getItems",value:function(){var e=this;this.loading=!0,this.itemList=[],this._dropService.getItems(this.page.pageNumber.toString(),this.page.size.toString(),this.userId,null,this.searchFieldBy.v,this.searchFieldValue,this.statuses,this.shopNumber).subscribe((function(t){console.log(t),e.page.totalElements=t.meta.total_elements,e.page.totalPages=t.meta.total_elements>0?Math.ceil(t.meta.total_elements/e.page.size):0,e.itemList=t.data,console.log(e.itemList),e.loading=!1}),(function(t){e.loading=!1}))}},{key:"viewItem",value:function(e){console.log(e),this._dropService.setItemData(e),console.log(this._route.url),this._router.navigate([e.item_drop_number],{relativeTo:this._route})}},{key:"editItem",value:function(e){this._dropService.setItemAction("edit"),this._dropService.setItemData(e),this._router.navigate(["/drop/item"])}},{key:"applyAcceptFrmControlValidators",value:function(e,t){this.acceptDeclineForm.controls[e].setValidators(t),this.acceptDeclineForm.controls[e].updateValueAndValidity()}},{key:"disableAcceptFrmControlValidators",value:function(e){this.acceptDeclineForm.controls[e].reset(),this.acceptDeclineForm.controls[e].markAsUntouched(),this.acceptDeclineForm.controls[e].clearValidators(),this.acceptDeclineForm.controls[e].updateValueAndValidity()}},{key:"openDropActionModal",value:function(e,t){this.modalRef=this._modalService.show(a.a,{backdrop:!0,ignoreBackdropClick:!0,class:"modal-md cascading-modal",data:{action:e,item:t}})}},{key:"isInvalidFieldValue",get:function(){return this.isInValid("search_field","required")&&this.isTouched("search_field")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.Sb(i.c),s.Sb(c.a),s.Sb(u.a),s.Sb(l.b),s.Sb(d.u),s.Sb(p.e),s.Sb(p.a))},e.\u0275cmp=s.Mb({type:e,selectors:[["app-items"]],decls:55,vars:12,consts:[[1,"drop_content"],[1,"row"],[1,"col-sm-12","col-md-12","col-lg-12","mb-4",2,"padding-top","5px"],[1,"card"],[1,"card-body","border-top"],[1,"col-md-12","col-lg-12","col-sm-12","mb-2"],[3,"formGroup"],[1,"col-md-4","offset-md-3"],[1,"md-form","text-center"],["id","search_field","type","text","mdbInput","","mdbValidate","","formControlName","search_field",1,"form-control"],["for","search_field"],[4,"ngIf"],[1,"col-md-3","offset-md-2"],[1,"md-form","mr-2","pr-1"],["formControlName","filter_criteria",1,"form-control",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","col-md-12 col-lg-12 col-sm-6 overlay",4,"ngIf"],[1,"col-md-12","col-sm-12","col-sm-6"],[1,"table-responsive"],[1,"table","table-bordered","table-hover"],["scope","col"],["scope","col",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"float-left","drop_table_pagenation",3,"maxSize","totalItems","ngModel","itemsPerPage","ngModelChange","pageChanged"],[3,"value"],[1,"col-md-12","col-lg-12","col-sm-6","overlay"],[1,"spinner-wrapper"],[1,"spinner"],[1,"text-center"],["class","dropdown waves-light","dropdown","","role","menu",4,"ngIf"],["dropdown","","role","menu",1,"dropdown","waves-light"],["dropdownToggle","","mdbWavesEffect","",1,"waves-light",2,"width","100%"],["aria-hidden","true",1,"fa","fa-ellipsis-v"],[1,"dropdown-menu"],["class","dropdown-item",3,"click",4,"ngIf"],[1,"dropdown-item",3,"click"]],template:function(e,t){1&e&&(s.Yb(0,"div",0),s.Yb(1,"div",1),s.Yb(2,"div",2),s.Yb(3,"div",3),s.Yb(4,"div",4),s.Yb(5,"div",1),s.Yb(6,"div",5),s.Yb(7,"form",6),s.Yb(8,"div",1),s.Yb(9,"div",7),s.Yb(10,"div",8),s.Tb(11,"input",9),s.Yb(12,"label",10),s.Mc(13),s.Xb(),s.Kc(14,b,2,1,"mdb-error",11),s.Xb(),s.Xb(),s.Yb(15,"div",12),s.Yb(16,"div",13),s.Yb(17,"select",14),s.gc("change",(function(e){return t.onFilterCriteriaChange(e.target.value)})),s.Yb(18,"option",15),s.Mc(19,"Filter By "),s.Xb(),s.Kc(20,m,2,2,"option",16),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Yb(21,"div",1),s.Kc(22,g,3,0,"div",17),s.Xb(),s.Yb(23,"div",18),s.Yb(24,"div",19),s.Yb(25,"table",20),s.Yb(26,"caption"),s.Mc(27,"List of Dropped Items"),s.Xb(),s.Yb(28,"thead"),s.Yb(29,"tr"),s.Yb(30,"th",21),s.Mc(31,"#"),s.Xb(),s.Yb(32,"th",21),s.Mc(33,"Name"),s.Xb(),s.Yb(34,"th",21),s.Mc(35,"Description"),s.Xb(),s.Yb(36,"th",21),s.Mc(37,"Type"),s.Xb(),s.Kc(38,v,2,0,"th",22),s.Kc(39,_,2,0,"th",22),s.Yb(40,"th",21),s.Mc(41,"Hours"),s.Xb(),s.Yb(42,"th",21),s.Mc(43,"Cost"),s.Xb(),s.Yb(44,"th",21),s.Mc(45,"Paid"),s.Xb(),s.Yb(46,"th",21),s.Mc(47,"Balance"),s.Xb(),s.Yb(48,"th",21),s.Mc(49,"Status"),s.Xb(),s.Yb(50,"th",21),s.Mc(51,"Action"),s.Xb(),s.Xb(),s.Xb(),s.Yb(52,"tbody"),s.Kc(53,D,24,13,"tr",23),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Yb(54,"pagination",24),s.gc("ngModelChange",(function(e){return t.page.pageNumber=e}))("pageChanged",(function(e){return t.pageChanged(e)})),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb()),2&e&&(s.Db(7),s.qc("formGroup",t.searchForm),s.Db(6),s.Oc("Search by ",t.searchFieldBy.name,""),s.Db(1),s.qc("ngIf",t.isInvalidFieldValue),s.Db(6),s.qc("ngForOf",t.itemStatuses),s.Db(2),s.qc("ngIf",t.loading),s.Db(16),s.qc("ngIf",!t.is_shop_management),s.Db(1),s.qc("ngIf",!t.is_shop_management),s.Db(14),s.qc("ngForOf",t.itemList),s.Db(1),s.qc("maxSize",t.MAX_SIZE)("totalItems",t.page.totalElements)("ngModel",t.page.pageNumber)("itemsPerPage",t.page.size))},directives:[i.u,i.l,i.f,i.b,d.C,d.G,i.k,i.e,h.j,i.r,i.n,i.t,h.i,f.a,i.m,d.A,d.d,d.e,d.M],styles:[".dropdown-content[_ngcontent-%COMP%]{right:0!important;left:0!important}.dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%], .dropleft[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%], .dropright[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%], .dropup-material[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{padding:3px}.dropdown-menu[_ngcontent-%COMP%]{margin-top:0;min-width:4.5rem}.card-body[_ngcontent-%COMP%]{padding-top:0;padding-right:0;padding-left:0}.md-form[_ngcontent-%COMP%]{margin-top:1rem;margin-bottom:.75rem}.mdb-tabcolor[_ngcontent-%COMP%]{background-color:#0f7254!important}"]}),e}()},pxUr:function(e,t,n){"use strict";n.d(t,"a",(function(){return ve})),n.d(t,"b",(function(){return K})),n.d(t,"c",(function(){return ue})),n.d(t,"d",(function(){return de})),n.d(t,"e",(function(){return z})),n.d(t,"f",(function(){return W}));var i=n("mrSG"),r=n("fXoL"),o=n("HDdC"),a=n("2Vo4"),s=n("Cfvw"),c=n("PqYM"),u=(n("XNiG"),n("DH7j")),l=n("n6bG"),d=n("lJxs"),p=n("VRyK"),h=n("jtHE");n("quSY"),n("8Qeq"),n("z+Ro"),n("LRne"),n("z6cu");var f,b,m,g,v,_,y,k,C,w,I,O=n("5+tZ"),M=n("l7GE"),A=n("ZUHj"),S=function(){function e(t){_classCallCheck(this,e),this.notifier=t}return _createClass(e,[{key:"call",value:function(e,t){var n=new P(e),i=t.subscribe(n);return i.add(Object(A.a)(n,this.notifier)),i}}]),e}(),P=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.apply(this,arguments)).hasValue=!1,e}return _createClass(n,[{key:"_next",value:function(e){this.value=e,this.hasValue=!0}},{key:"notifyNext",value:function(e,t,n,i,r){this.emitValue()}},{key:"notifyComplete",value:function(){this.emitValue()}},{key:"emitValue",value:function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))}}]),n}(M.a),X=n("eIep"),D=n("UXun"),Y=(n("/uUt"),n("1G5W"),n("JX91")),T=n("zP0r"),E=(n("oB13"),n("ofXK")),x=["*"],W=((v=function e(){_classCallCheck(this,e)}).\u0275fac=function(e){return new(e||v)},v.\u0275prov=r.Ob({token:v,factory:v.\u0275fac}),v),z=((g=function(){function e(t,n){var i=this;_classCallCheck(this,e),this._loader=t,this._zone=n,this._map=new Promise((function(e){i._mapResolver=e}))}return _createClass(e,[{key:"createMap",value:function(e,t){var n=this;return this._zone.runOutsideAngular((function(){return n._loader.load().then((function(){var i=new google.maps.Map(e,t);n._mapResolver(i)}))}))}},{key:"setMapOptions",value:function(e){var t=this;return this._zone.runOutsideAngular((function(){t._map.then((function(t){t.setOptions(e)}))}))}},{key:"createMarker",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this._zone.runOutsideAngular((function(){return e._map.then((function(e){return n&&(t.map=e),new google.maps.Marker(t)}))}))}},{key:"createInfoWindow",value:function(e){var t=this;return this._zone.runOutsideAngular((function(){return t._map.then((function(){return new google.maps.InfoWindow(e)}))}))}},{key:"createCircle",value:function(e){var t=this;return this._zone.runOutsideAngular((function(){return t._map.then((function(t){return"string"==typeof e.strokePosition&&(e.strokePosition=google.maps.StrokePosition[e.strokePosition]),e.map=t,new google.maps.Circle(e)}))}))}},{key:"createRectangle",value:function(e){var t=this;return this._zone.runOutsideAngular((function(){return t._map.then((function(t){return e.map=t,new google.maps.Rectangle(e)}))}))}},{key:"createPolyline",value:function(e){var t=this;return this._zone.runOutsideAngular((function(){return t.getNativeMap().then((function(t){var n=new google.maps.Polyline(e);return n.setMap(t),n}))}))}},{key:"createPolygon",value:function(e){var t=this;return this._zone.runOutsideAngular((function(){return t.getNativeMap().then((function(t){var n=new google.maps.Polygon(e);return n.setMap(t),n}))}))}},{key:"createDataLayer",value:function(e){var t=this;return this._zone.runOutsideAngular((function(){return t._map.then((function(t){var n=new google.maps.Data(e);return n.setMap(t),n}))}))}},{key:"createTransitLayer",value:function(e){var t=this;return this._zone.runOutsideAngular((function(){return t._map.then((function(t){var n=new google.maps.TransitLayer;return n.setMap(e.visible?t:null),n}))}))}},{key:"createBicyclingLayer",value:function(e){var t=this;return this._zone.runOutsideAngular((function(){return t._map.then((function(t){var n=new google.maps.BicyclingLayer;return n.setMap(e.visible?t:null),n}))}))}},{key:"containsLocation",value:function(e,t){return google.maps.geometry.poly.containsLocation(e,t)}},{key:"subscribeToMapEvent",value:function(e){var t=this;return new o.a((function(n){t._map.then((function(i){i.addListener(e,(function(e){t._zone.run((function(){return n.next(e)}))}))}))}))}},{key:"clearInstanceListeners",value:function(){var e=this;return this._zone.runOutsideAngular((function(){e._map.then((function(e){google.maps.event.clearInstanceListeners(e)}))}))}},{key:"setCenter",value:function(e){var t=this;return this._zone.runOutsideAngular((function(){return t._map.then((function(t){return t.setCenter(e)}))}))}},{key:"getZoom",value:function(){var e=this;return this._zone.runOutsideAngular((function(){return e._map.then((function(e){return e.getZoom()}))}))}},{key:"getBounds",value:function(){var e=this;return this._zone.runOutsideAngular((function(){return e._map.then((function(e){return e.getBounds()}))}))}},{key:"getMapTypeId",value:function(){var e=this;return this._zone.runOutsideAngular((function(){return e._map.then((function(e){return e.getMapTypeId()}))}))}},{key:"setZoom",value:function(e){var t=this;return this._zone.runOutsideAngular((function(){return t._map.then((function(t){return t.setZoom(e)}))}))}},{key:"getCenter",value:function(){var e=this;return this._zone.runOutsideAngular((function(){return e._map.then((function(e){return e.getCenter()}))}))}},{key:"panTo",value:function(e){var t=this;return this._zone.runOutsideAngular((function(){return t._map.then((function(t){return t.panTo(e)}))}))}},{key:"panBy",value:function(e,t){var n=this;return this._zone.runOutsideAngular((function(){return n._map.then((function(n){return n.panBy(e,t)}))}))}},{key:"fitBounds",value:function(e,t){var n=this;return this._zone.runOutsideAngular((function(){return n._map.then((function(n){return n.fitBounds(e,t)}))}))}},{key:"panToBounds",value:function(e,t){var n=this;return this._zone.runOutsideAngular((function(){return n._map.then((function(n){return n.panToBounds(e,t)}))}))}},{key:"getNativeMap",value:function(){return this._map}},{key:"triggerMapEvent",value:function(e){return this._map.then((function(t){return google.maps.event.trigger(t,e)}))}}]),e}()).\u0275fac=function(e){return new(e||g)(r.cc(W),r.cc(r.A))},g.\u0275prov=r.Ob({token:g,factory:g.\u0275fac}),g),L=((m=function(){function e(t){_classCallCheck(this,e),this._wrapper=t,this._layers=new Map}return _createClass(e,[{key:"addTransitLayer",value:function(e,t){var n=this._wrapper.createTransitLayer(t);this._layers.set(e,n)}},{key:"addBicyclingLayer",value:function(e,t){var n=this._wrapper.createBicyclingLayer(t);this._layers.set(e,n)}},{key:"deleteLayer",value:function(e){var t=this;return this._layers.get(e).then((function(n){n.setMap(null),t._layers.delete(e)}))}},{key:"toggleLayerVisibility",value:function(e,t){var n=this;return this._layers.get(e).then((function(e){return t.visible?n._wrapper.getNativeMap().then((function(t){e.setMap(t)})):void e.setMap(null)}))}}]),e}()).\u0275fac=function(e){return new(e||m)(r.cc(z))},m.\u0275prov=r.Ob({token:m,factory:m.\u0275fac}),m),B=((b=function(){function e(t,n){_classCallCheck(this,e),this._apiWrapper=t,this._zone=n,this._circles=new Map}return _createClass(e,[{key:"addCircle",value:function(e){this._circles.set(e,this._apiWrapper.createCircle({center:{lat:e.latitude,lng:e.longitude},clickable:e.clickable,draggable:e.draggable,editable:e.editable,fillColor:e.fillColor,fillOpacity:e.fillOpacity,radius:e.radius,strokeColor:e.strokeColor,strokeOpacity:e.strokeOpacity,strokePosition:e.strokePosition,strokeWeight:e.strokeWeight,visible:e.visible,zIndex:e.zIndex}))}},{key:"removeCircle",value:function(e){var t=this;return this._circles.get(e).then((function(n){n.setMap(null),t._circles.delete(e)}))}},{key:"setOptions",value:function(e,t){return this._circles.get(e).then((function(e){"string"==typeof t.strokePosition&&(t.strokePosition=google.maps.StrokePosition[t.strokePosition]),e.setOptions(t)}))}},{key:"getBounds",value:function(e){return this._circles.get(e).then((function(e){return e.getBounds()}))}},{key:"getCenter",value:function(e){return this._circles.get(e).then((function(e){return e.getCenter()}))}},{key:"getRadius",value:function(e){return this._circles.get(e).then((function(e){return e.getRadius()}))}},{key:"setCenter",value:function(e){return this._circles.get(e).then((function(t){return t.setCenter({lat:e.latitude,lng:e.longitude})}))}},{key:"setEditable",value:function(e){return this._circles.get(e).then((function(t){return t.setEditable(e.editable)}))}},{key:"setDraggable",value:function(e){return this._circles.get(e).then((function(t){return t.setDraggable(e.draggable)}))}},{key:"setVisible",value:function(e){return this._circles.get(e).then((function(t){return t.setVisible(e.visible)}))}},{key:"setRadius",value:function(e){return this._circles.get(e).then((function(t){return t.setRadius(e.radius)}))}},{key:"getNativeCircle",value:function(e){return this._circles.get(e)}},{key:"createEventObservable",value:function(e,t){var n=this;return new o.a((function(i){var r=null;return n._circles.get(t).then((function(t){r=t.addListener(e,(function(e){return n._zone.run((function(){return i.next(e)}))}))})),function(){null!==r&&r.remove()}}))}}]),e}()).\u0275fac=function(e){return new(e||b)(r.cc(z),r.cc(r.A))},b.\u0275prov=r.Ob({token:b,factory:b.\u0275fac}),b),N=((f=function(){function e(t,n){_classCallCheck(this,e),this._wrapper=t,this._zone=n,this._layers=new Map}return _createClass(e,[{key:"addDataLayer",value:function(e){var t=this,n=this._wrapper.createDataLayer({style:e.style}).then((function(n){return e.geoJson&&t.getDataFeatures(n,e.geoJson).then((function(e){return n.features=e})),n}));this._layers.set(e,n)}},{key:"deleteDataLayer",value:function(e){var t=this;this._layers.get(e).then((function(n){n.setMap(null),t._layers.delete(e)}))}},{key:"updateGeoJson",value:function(e,t){var n=this;this._layers.get(e).then((function(e){e.forEach((function(t){e.remove(t);var n=e.features.indexOf(t,0);n>-1&&e.features.splice(n,1)})),n.getDataFeatures(e,t).then((function(t){return e.features=t}))}))}},{key:"setDataOptions",value:function(e,t){this._layers.get(e).then((function(e){e.setControlPosition(t.controlPosition),e.setControls(t.controls),e.setDrawingMode(t.drawingMode),e.setStyle(t.style)}))}},{key:"createEventObservable",value:function(e,t){var n=this;return new o.a((function(i){n._layers.get(t).then((function(t){t.addListener(e,(function(e){return n._zone.run((function(){return i.next(e)}))}))}))}))}},{key:"getDataFeatures",value:function(e,t){return new Promise((function(n,i){if("object"==typeof t)try{n(e.addGeoJson(t))}catch(r){i(r)}else"string"==typeof t?e.loadGeoJson(t,null,n):i("Impossible to extract features from geoJson: wrong argument type")}))}}]),e}()).\u0275fac=function(e){return new(e||f)(r.cc(z),r.cc(r.A))},f.\u0275prov=r.Ob({token:f,factory:f.\u0275fac}),f),R=function e(){_classCallCheck(this,e)},q=((k=function(){function e(t){var n,i=this;_classCallCheck(this,e),this._boundsChangeSampleTime$=new a.a(200),this._includeInBounds$=new a.a(new Map),this.bounds$=Object(s.a)(t.load()).pipe(Object(O.a)((function(){return i._includeInBounds$})),(n=this._boundsChangeSampleTime$.pipe(Object(X.a)((function(e){return Object(c.a)(0,e)}))),function(e){return e.lift(new S(n))}),Object(d.a)((function(e){return i._generateBounds(e)})),Object(D.a)(1))}return _createClass(e,[{key:"_generateBounds",value:function(e){var t=new google.maps.LatLngBounds;return e.forEach((function(e){return t.extend(e)})),t}},{key:"addToBounds",value:function(e){var t=this._createIdentifier(e);if(!this._includeInBounds$.value.has(t)){var n=this._includeInBounds$.value;n.set(t,e),this._includeInBounds$.next(n)}}},{key:"removeFromBounds",value:function(e){var t=this._includeInBounds$.value;t.delete(this._createIdentifier(e)),this._includeInBounds$.next(t)}},{key:"changeFitBoundsChangeSampleTime",value:function(e){this._boundsChangeSampleTime$.next(e)}},{key:"getBounds$",value:function(){return this.bounds$}},{key:"_createIdentifier",value:function(e){return"".concat(e.lat,"+").concat(e.lng)}}]),e}()).\u0275fac=function(e){return new(e||k)(r.cc(W))},k.\u0275prov=r.Ob({token:k,factory:k.\u0275fac}),k),F=((y=function(){function e(t,n){_classCallCheck(this,e),this._mapsWrapper=t,this._zone=n,this._markers=new Map}return _createClass(e,[{key:"convertAnimation",value:function(e){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",null===e?null:this._mapsWrapper.getNativeMap().then((function(){return google.maps.Animation[e]})));case 1:case"end":return t.stop()}}),t,this)})))}},{key:"deleteMarker",value:function(e){var t=this,n=this._markers.get(e);return null==n?Promise.resolve():n.then((function(n){return t._zone.run((function(){n.setMap(null),t._markers.delete(e)}))}))}},{key:"updateMarkerPosition",value:function(e){return this._markers.get(e).then((function(t){return t.setPosition({lat:e.latitude,lng:e.longitude})}))}},{key:"updateTitle",value:function(e){return this._markers.get(e).then((function(t){return t.setTitle(e.title)}))}},{key:"updateLabel",value:function(e){return this._markers.get(e).then((function(t){t.setLabel(e.label)}))}},{key:"updateDraggable",value:function(e){return this._markers.get(e).then((function(t){return t.setDraggable(e.draggable)}))}},{key:"updateIcon",value:function(e){return this._markers.get(e).then((function(t){return t.setIcon(e.iconUrl)}))}},{key:"updateOpacity",value:function(e){return this._markers.get(e).then((function(t){return t.setOpacity(e.opacity)}))}},{key:"updateVisible",value:function(e){return this._markers.get(e).then((function(t){return t.setVisible(e.visible)}))}},{key:"updateZIndex",value:function(e){return this._markers.get(e).then((function(t){return t.setZIndex(e.zIndex)}))}},{key:"updateClickable",value:function(e){return this._markers.get(e).then((function(t){return t.setClickable(e.clickable)}))}},{key:"updateAnimation",value:function(e){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._markers.get(e);case 2:return t.t0=t.sent,t.next=5,this.convertAnimation(e.animation);case 5:t.t1=t.sent,t.t0.setAnimation.call(t.t0,t.t1);case 7:case"end":return t.stop()}}),t,this)})))}},{key:"addMarker",value:function(e){var t=this,n=new Promise((function(n){return Object(i.a)(t,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this._mapsWrapper,t.t1={lat:e.latitude,lng:e.longitude},t.t2=e.label,t.t3=e.draggable,t.t4=e.iconUrl,t.t5=e.opacity,t.t6=e.visible,t.t7=e.zIndex,t.t8=e.title,t.t9=e.clickable,t.next=12,this.convertAnimation(e.animation);case 12:return t.t10=t.sent,t.t11={position:t.t1,label:t.t2,draggable:t.t3,icon:t.t4,opacity:t.t5,visible:t.t6,zIndex:t.t7,title:t.t8,clickable:t.t9,animation:t.t10},t.abrupt("return",t.t0.createMarker.call(t.t0,t.t11).then(n));case 15:case"end":return t.stop()}}),t,this)})))}));this._markers.set(e,n)}},{key:"getNativeMarker",value:function(e){return this._markers.get(e)}},{key:"createEventObservable",value:function(e,t){var n=this;return new o.a((function(i){n._markers.get(t).then((function(t){t.addListener(e,(function(e){return n._zone.run((function(){return i.next(e)}))}))}))}))}}]),e}()).\u0275fac=function(e){return new(e||y)(r.cc(z),r.cc(r.A))},y.\u0275prov=r.Ob({token:y,factory:y.\u0275fac}),y),V=((_=function(){function e(t,n,i){_classCallCheck(this,e),this._mapsWrapper=t,this._zone=n,this._markerManager=i,this._infoWindows=new Map}return _createClass(e,[{key:"deleteInfoWindow",value:function(e){var t=this,n=this._infoWindows.get(e);return null==n?Promise.resolve():n.then((function(n){return t._zone.run((function(){n.close(),t._infoWindows.delete(e)}))}))}},{key:"setPosition",value:function(e){return this._infoWindows.get(e).then((function(t){return t.setPosition({lat:e.latitude,lng:e.longitude})}))}},{key:"setZIndex",value:function(e){return this._infoWindows.get(e).then((function(t){return t.setZIndex(e.zIndex)}))}},{key:"open",value:function(e){var t=this;return this._infoWindows.get(e).then((function(n){return null!=e.hostMarker?t._markerManager.getNativeMarker(e.hostMarker).then((function(e){return t._mapsWrapper.getNativeMap().then((function(t){return n.open(t,e)}))})):t._mapsWrapper.getNativeMap().then((function(e){return n.open(e)}))}))}},{key:"close",value:function(e){return this._infoWindows.get(e).then((function(e){return e.close()}))}},{key:"setOptions",value:function(e,t){return this._infoWindows.get(e).then((function(e){return e.setOptions(t)}))}},{key:"addInfoWindow",value:function(e){var t={content:e.content,maxWidth:e.maxWidth,zIndex:e.zIndex,disableAutoPan:e.disableAutoPan};"number"==typeof e.latitude&&"number"==typeof e.longitude&&(t.position={lat:e.latitude,lng:e.longitude});var n=this._mapsWrapper.createInfoWindow(t);this._infoWindows.set(e,n)}},{key:"createEventObservable",value:function(e,t){var n=this;return new o.a((function(i){n._infoWindows.get(t).then((function(t){t.addListener(e,(function(e){return n._zone.run((function(){return i.next(e)}))}))}))}))}}]),e}()).\u0275fac=function(e){return new(e||_)(r.cc(z),r.cc(r.A),r.cc(F))},_.\u0275prov=r.Ob({token:_,factory:_.\u0275fac}),_),j=0,K=((I=C=function(){function e(t,n){_classCallCheck(this,e),this._infoWindowManager=t,this._el=n,this.isOpen=!1,this.infoWindowClose=new r.o,this._infoWindowAddedToManager=!1,this._id=(j++).toString()}return _createClass(e,[{key:"ngOnInit",value:function(){this.content=this._el.nativeElement.querySelector(".agm-info-window-content"),this._infoWindowManager.addInfoWindow(this),this._infoWindowAddedToManager=!0,this._updateOpenState(),this._registerEventListeners()}},{key:"ngOnChanges",value:function(e){this._infoWindowAddedToManager&&((e.latitude||e.longitude)&&"number"==typeof this.latitude&&"number"==typeof this.longitude&&this._infoWindowManager.setPosition(this),e.zIndex&&this._infoWindowManager.setZIndex(this),e.isOpen&&this._updateOpenState(),this._setInfoWindowOptions(e))}},{key:"_registerEventListeners",value:function(){var e=this;this._infoWindowManager.createEventObservable("closeclick",this).subscribe((function(){e.isOpen=!1,e.infoWindowClose.emit()}))}},{key:"_updateOpenState",value:function(){this.isOpen?this.open():this.close()}},{key:"_setInfoWindowOptions",value:function(e){var t={};Object.keys(e).filter((function(e){return-1!==C._infoWindowOptionsInputs.indexOf(e)})).forEach((function(n){t[n]=e[n].currentValue})),this._infoWindowManager.setOptions(this,t)}},{key:"open",value:function(){return this._infoWindowManager.open(this)}},{key:"close",value:function(){var e=this;return this._infoWindowManager.close(this).then((function(){e.infoWindowClose.emit()}))}},{key:"id",value:function(){return this._id}},{key:"toString",value:function(){return"AgmInfoWindow-"+this._id.toString()}},{key:"ngOnDestroy",value:function(){this._infoWindowManager.deleteInfoWindow(this)}}]),e}()).\u0275fac=function(e){return new(e||I)(r.Sb(V),r.Sb(r.l))},I.\u0275cmp=r.Mb({type:I,selectors:[["agm-info-window"]],inputs:{isOpen:"isOpen",latitude:"latitude",longitude:"longitude",disableAutoPan:"disableAutoPan",zIndex:"zIndex",maxWidth:"maxWidth"},outputs:{infoWindowClose:"infoWindowClose"},features:[r.Bb],ngContentSelectors:x,decls:2,vars:0,consts:[[1,"agm-info-window-content"]],template:function(e,t){1&e&&(r.pc(),r.Yb(0,"div",0),r.oc(1),r.Xb())},encapsulation:2}),I._infoWindowOptionsInputs=["disableAutoPan","maxWidth"],I),Z=((w=function(){function e(t,n){_classCallCheck(this,e),this._wrapper=t,this._zone=n,this._layers=new Map}return _createClass(e,[{key:"addKmlLayer",value:function(e){var t=this._wrapper.getNativeMap().then((function(t){return new google.maps.KmlLayer({clickable:e.clickable,map:t,preserveViewport:e.preserveViewport,screenOverlays:e.screenOverlays,suppressInfoWindows:e.suppressInfoWindows,url:e.url,zIndex:e.zIndex})}));this._layers.set(e,t)}},{key:"setOptions",value:function(e,t){this._layers.get(e).then((function(e){return e.setOptions(t)}))}},{key:"deleteKmlLayer",value:function(e){var t=this;this._layers.get(e).then((function(n){n.setMap(null),t._layers.delete(e)}))}},{key:"createEventObservable",value:function(e,t){var n=this;return new o.a((function(i){n._layers.get(t).then((function(t){t.addListener(e,(function(e){return n._zone.run((function(){return i.next(e)}))}))}))}))}}]),e}()).\u0275fac=function(e){return new(e||w)(r.cc(z),r.cc(r.A))},w.\u0275prov=r.Ob({token:w,factory:w.\u0275fac}),w);function U(e){var t=["insert_at","remove_at","set_at"];return function e(t,n,i){return i?e(t,n).pipe(Object(d.a)((function(e){return Object(u.a)(e)?i.apply(void 0,_toConsumableArray(e)):i(e)}))):new o.a((function(e){var i,r=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.next(1===n.length?n[0]:n)};try{i=t(r)}catch(o){return void e.error(o)}if(Object(l.a)(n))return function(){return n(r,i)}}))}((function(n){return t.map((function(t){return e.addListener(t,(function(i,r){return n.apply(e,[{newArr:e.getArray(),evName:t,index:i,previous:r}])}))}))}),(function(e,t){return t.forEach((function(e){return e.remove()}))}))}var $,H,G,J,Q,ee,te,ne,ie,re,oe,ae=(($=function(){function e(t,n){_classCallCheck(this,e),this._mapsWrapper=t,this._zone=n,this._polygons=new Map}return _createClass(e,[{key:"addPolygon",value:function(e){var t=this._mapsWrapper.createPolygon({clickable:e.clickable,draggable:e.draggable,editable:e.editable,fillColor:e.fillColor,fillOpacity:e.fillOpacity,geodesic:e.geodesic,paths:e.paths,strokeColor:e.strokeColor,strokeOpacity:e.strokeOpacity,strokeWeight:e.strokeWeight,visible:e.visible,zIndex:e.zIndex});this._polygons.set(e,t)}},{key:"updatePolygon",value:function(e){var t=this,n=this._polygons.get(e);return null==n?Promise.resolve():n.then((function(n){return t._zone.run((function(){n.setPaths(e.paths)}))}))}},{key:"setPolygonOptions",value:function(e,t){return this._polygons.get(e).then((function(e){e.setOptions(t)}))}},{key:"deletePolygon",value:function(e){var t=this,n=this._polygons.get(e);return null==n?Promise.resolve():n.then((function(n){return t._zone.run((function(){n.setMap(null),t._polygons.delete(e)}))}))}},{key:"getPath",value:function(e){return this._polygons.get(e).then((function(e){return e.getPath().getArray()}))}},{key:"getPaths",value:function(e){return this._polygons.get(e).then((function(e){return e.getPaths().getArray().map((function(e){return e.getArray()}))}))}},{key:"createEventObservable",value:function(e,t){var n=this;return new o.a((function(i){n._polygons.get(t).then((function(t){t.addListener(e,(function(e){return n._zone.run((function(){return i.next(e)}))}))}))}))}},{key:"createPathEventObservable",value:function(e){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._polygons.get(e);case 2:return n=t.sent.getPaths(),t.abrupt("return",U(n).pipe(Object(Y.a)({newArr:n.getArray()}),Object(X.a)((function(e){return Object(p.a).apply(void 0,_toConsumableArray(e.newArr.map((function(t,n){return U(t).pipe(Object(d.a)((function(t){return{parentMVEvent:e,chMVCEvent:t,pathIndex:n}})))})))).pipe(Object(Y.a)({parentMVEvent:e,chMVCEvent:null,pathIndex:null}))})),Object(T.a)(1),Object(d.a)((function(e){var t,n=e.parentMVEvent,i=e.chMVCEvent,r=e.pathIndex;return i?(t={newArr:n.newArr.map((function(e){return e.getArray().map((function(e){return e.toJSON()}))})),pathIndex:r,eventName:i.evName,index:i.index},i.previous&&(t.previous=i.previous)):(t={newArr:n.newArr.map((function(e){return e.getArray().map((function(e){return e.toJSON()}))})),eventName:n.evName,index:n.index},n.previous&&(t.previous=n.previous.getArray())),t}))));case 4:case"end":return t.stop()}}),t,this)})))}}]),e}()).\u0275fac=function(e){return new(e||$)(r.cc(z),r.cc(r.A))},$.\u0275prov=r.Ob({token:$,factory:$.\u0275fac}),$),se=((J=H=function(){function e(t,n){_classCallCheck(this,e),this._mapsWrapper=t,this._zone=n,this._polylines=new Map}return _createClass(e,[{key:"addPolyline",value:function(e){var t=this,n=this._mapsWrapper.getNativeMap().then((function(){return[H._convertPoints(e),H._convertIcons(e)]})).then((function(n){var i=_slicedToArray(n,2),r=i[0],o=i[1];return t._mapsWrapper.createPolyline({clickable:e.clickable,draggable:e.draggable,editable:e.editable,geodesic:e.geodesic,strokeColor:e.strokeColor,strokeOpacity:e.strokeOpacity,strokeWeight:e.strokeWeight,visible:e.visible,zIndex:e.zIndex,path:r,icons:o})}));this._polylines.set(e,n)}},{key:"updatePolylinePoints",value:function(e){var t=this,n=H._convertPoints(e),i=this._polylines.get(e);return null==i?Promise.resolve():i.then((function(e){return t._zone.run((function(){e.setPath(n)}))}))}},{key:"updateIconSequences",value:function(e){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,i,r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._mapsWrapper.getNativeMap();case 2:if(n=H._convertIcons(e),null==(i=this._polylines.get(e))){t.next=5;break}return t.abrupt("return",i.then((function(e){return r._zone.run((function(){return e.setOptions({icons:n})}))})));case 5:case"end":return t.stop()}}),t,this)})))}},{key:"setPolylineOptions",value:function(e,t){return this._polylines.get(e).then((function(e){e.setOptions(t)}))}},{key:"deletePolyline",value:function(e){var t=this,n=this._polylines.get(e);return null==n?Promise.resolve():n.then((function(n){return t._zone.run((function(){n.setMap(null),t._polylines.delete(e)}))}))}},{key:"getMVCPath",value:function(e){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._polylines.get(e);case 2:return t.abrupt("return",t.sent.getPath());case 3:case"end":return t.stop()}}),t,this)})))}},{key:"getPath",value:function(e){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getMVCPath(e);case 2:return t.abrupt("return",t.sent.getArray());case 3:case"end":return t.stop()}}),t,this)})))}},{key:"createEventObservable",value:function(e,t){var n=this;return new o.a((function(i){n._polylines.get(t).then((function(t){t.addListener(e,(function(e){return n._zone.run((function(){return i.next(e)}))}))}))}))}},{key:"createPathEventObservable",value:function(e){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=U,t.next=3,this.getMVCPath(e);case 3:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 5:case"end":return t.stop()}}),t,this)})))}}],[{key:"_convertPoints",value:function(e){return e._getPoints().map((function(e){return{lat:e.latitude,lng:e.longitude}}))}},{key:"_convertPath",value:function(e){var t=google.maps.SymbolPath[e];return"number"==typeof t?t:e}},{key:"_convertIcons",value:function(e){var t=e._getIcons().map((function(e){return{fixedRotation:e.fixedRotation,offset:e.offset,repeat:e.repeat,icon:{anchor:new google.maps.Point(e.anchorX,e.anchorY),fillColor:e.fillColor,fillOpacity:e.fillOpacity,path:H._convertPath(e.path),rotation:e.rotation,scale:e.scale,strokeColor:e.strokeColor,strokeOpacity:e.strokeOpacity,strokeWeight:e.strokeWeight}}}));return t.forEach((function(e){Object.entries(e).forEach((function(t){var n=_slicedToArray(t,2),i=n[0];void 0===n[1]&&delete e[i]})),void 0!==e.icon.anchor.x&&void 0!==e.icon.anchor.y||delete e.icon.anchor})),t}}]),e}()).\u0275fac=function(e){return new(e||J)(r.cc(z),r.cc(r.A))},J.\u0275prov=r.Ob({token:J,factory:J.\u0275fac}),J),ce=((G=function(){function e(t,n){_classCallCheck(this,e),this._apiWrapper=t,this._zone=n,this._rectangles=new Map}return _createClass(e,[{key:"addRectangle",value:function(e){this._rectangles.set(e,this._apiWrapper.createRectangle({bounds:{north:e.north,east:e.east,south:e.south,west:e.west},clickable:e.clickable,draggable:e.draggable,editable:e.editable,fillColor:e.fillColor,fillOpacity:e.fillOpacity,strokeColor:e.strokeColor,strokeOpacity:e.strokeOpacity,strokePosition:e.strokePosition,strokeWeight:e.strokeWeight,visible:e.visible,zIndex:e.zIndex}))}},{key:"removeRectangle",value:function(e){var t=this;return this._rectangles.get(e).then((function(n){n.setMap(null),t._rectangles.delete(e)}))}},{key:"setOptions",value:function(e,t){return this._rectangles.get(e).then((function(e){return e.setOptions(t)}))}},{key:"getBounds",value:function(e){return this._rectangles.get(e).then((function(e){return e.getBounds()}))}},{key:"setBounds",value:function(e){return this._rectangles.get(e).then((function(t){return t.setBounds({north:e.north,east:e.east,south:e.south,west:e.west})}))}},{key:"setEditable",value:function(e){return this._rectangles.get(e).then((function(t){return t.setEditable(e.editable)}))}},{key:"setDraggable",value:function(e){return this._rectangles.get(e).then((function(t){return t.setDraggable(e.draggable)}))}},{key:"setVisible",value:function(e){return this._rectangles.get(e).then((function(t){return t.setVisible(e.visible)}))}},{key:"createEventObservable",value:function(e,t){var n=this;return o.a.create((function(i){var r=null;return n._rectangles.get(t).then((function(t){r=t.addListener(e,(function(e){return n._zone.run((function(){return i.next(e)}))}))})),function(){null!==r&&r.remove()}}))}}]),e}()).\u0275fac=function(e){return new(e||G)(r.cc(z),r.cc(r.A))},G.\u0275prov=r.Ob({token:G,factory:G.\u0275fac}),G),ue=((ee=Q=function(){function e(t,n,i,o,a){_classCallCheck(this,e),this._elem=t,this._mapsWrapper=n,this._platformId=i,this._fitBoundsService=o,this._zone=a,this.longitude=0,this.latitude=0,this.zoom=8,this.draggable=!0,this.disableDoubleClickZoom=!1,this.disableDefaultUI=!1,this.scrollwheel=!0,this.keyboardShortcuts=!0,this.styles=[],this.usePanning=!1,this.fitBounds=!1,this.scaleControl=!1,this.mapTypeControl=!1,this.panControl=!1,this.rotateControl=!1,this.fullscreenControl=!1,this.mapTypeId="roadmap",this.clickableIcons=!0,this.showDefaultInfoWindow=!0,this.gestureHandling="auto",this.tilt=0,this._observableSubscriptions=[],this.mapClick=new r.o,this.mapRightClick=new r.o,this.mapDblClick=new r.o,this.centerChange=new r.o,this.boundsChange=new r.o,this.mapTypeIdChange=new r.o,this.idle=new r.o,this.zoomChange=new r.o,this.mapReady=new r.o,this.tilesLoaded=new r.o}return _createClass(e,[{key:"ngOnInit",value:function(){if(!Object(E.s)(this._platformId)){var e=this._elem.nativeElement.querySelector(".agm-map-container-inner");this._initMapInstance(e)}}},{key:"_initMapInstance",value:function(e){var t=this;this._mapsWrapper.createMap(e,{center:{lat:this.latitude||0,lng:this.longitude||0},zoom:this.zoom,minZoom:this.minZoom,maxZoom:this.maxZoom,controlSize:this.controlSize,disableDefaultUI:this.disableDefaultUI,disableDoubleClickZoom:this.disableDoubleClickZoom,scrollwheel:this.scrollwheel,backgroundColor:this.backgroundColor,draggable:this.draggable,draggableCursor:this.draggableCursor,draggingCursor:this.draggingCursor,keyboardShortcuts:this.keyboardShortcuts,styles:this.styles,zoomControl:this.zoomControl,zoomControlOptions:this.zoomControlOptions,streetViewControl:this.streetViewControl,streetViewControlOptions:this.streetViewControlOptions,scaleControl:this.scaleControl,scaleControlOptions:this.scaleControlOptions,mapTypeControl:this.mapTypeControl,mapTypeControlOptions:this.mapTypeControlOptions,panControl:this.panControl,panControlOptions:this.panControlOptions,rotateControl:this.rotateControl,rotateControlOptions:this.rotateControlOptions,fullscreenControl:this.fullscreenControl,fullscreenControlOptions:this.fullscreenControlOptions,mapTypeId:this.mapTypeId,clickableIcons:this.clickableIcons,gestureHandling:this.gestureHandling,tilt:this.tilt,restriction:this.restriction}).then((function(){return t._mapsWrapper.getNativeMap()})).then((function(e){return t.mapReady.emit(e)})),this._handleMapCenterChange(),this._handleMapZoomChange(),this._handleMapMouseEvents(),this._handleBoundsChange(),this._handleMapTypeIdChange(),this._handleTilesLoadedEvent(),this._handleIdleEvent()}},{key:"ngOnDestroy",value:function(){this._observableSubscriptions.forEach((function(e){return e.unsubscribe()})),this._mapsWrapper.clearInstanceListeners(),this._fitBoundsSubscription&&this._fitBoundsSubscription.unsubscribe()}},{key:"ngOnChanges",value:function(e){this._updateMapOptionsChanges(e),this._updatePosition(e)}},{key:"_updateMapOptionsChanges",value:function(e){var t={};Object.keys(e).filter((function(e){return-1!==Q._mapOptionsAttributes.indexOf(e)})).forEach((function(n){t[n]=e[n].currentValue})),this._mapsWrapper.setMapOptions(t)}},{key:"triggerResize",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return new Promise((function(n){setTimeout((function(){return e._mapsWrapper.triggerMapEvent("resize").then((function(){t&&(null!=e.fitBounds?e._fitBounds():e._setCenter()),n()}))}))}))}},{key:"_updatePosition",value:function(e){(null!=e.latitude||null!=e.longitude||e.fitBounds)&&("fitBounds"in e?this._fitBounds():"number"==typeof this.latitude&&"number"==typeof this.longitude&&this._setCenter())}},{key:"_setCenter",value:function(){var e={lat:this.latitude,lng:this.longitude};this.usePanning?this._mapsWrapper.panTo(e):this._mapsWrapper.setCenter(e)}},{key:"_fitBounds",value:function(){switch(this.fitBounds){case!0:this._subscribeToFitBoundsUpdates();break;case!1:this._fitBoundsSubscription&&this._fitBoundsSubscription.unsubscribe();break;default:this._updateBounds(this.fitBounds,this.fitBoundsPadding)}}},{key:"_subscribeToFitBoundsUpdates",value:function(){var e=this;this._zone.runOutsideAngular((function(){e._fitBoundsSubscription=e._fitBoundsService.getBounds$().subscribe((function(t){e._zone.run((function(){return e._updateBounds(t,e.fitBoundsPadding)}))}))}))}},{key:"_updateBounds",value:function(e,t){if(e){if(this._isLatLngBoundsLiteral(e)&&"undefined"!=typeof google&&google&&google.maps&&google.maps.LatLngBounds){var n=new google.maps.LatLngBounds;n.union(e),e=n}this.usePanning?this._mapsWrapper.panToBounds(e,t):this._mapsWrapper.fitBounds(e,t)}}},{key:"_isLatLngBoundsLiteral",value:function(e){return null!=e&&void 0===e.extend}},{key:"_handleMapCenterChange",value:function(){var e=this,t=this._mapsWrapper.subscribeToMapEvent("center_changed").subscribe((function(){e._mapsWrapper.getCenter().then((function(t){e.latitude=t.lat(),e.longitude=t.lng(),e.centerChange.emit({lat:e.latitude,lng:e.longitude})}))}));this._observableSubscriptions.push(t)}},{key:"_handleBoundsChange",value:function(){var e=this,t=this._mapsWrapper.subscribeToMapEvent("bounds_changed").subscribe((function(){e._mapsWrapper.getBounds().then((function(t){e.boundsChange.emit(t)}))}));this._observableSubscriptions.push(t)}},{key:"_handleMapTypeIdChange",value:function(){var e=this,t=this._mapsWrapper.subscribeToMapEvent("maptypeid_changed").subscribe((function(){e._mapsWrapper.getMapTypeId().then((function(t){e.mapTypeIdChange.emit(t)}))}));this._observableSubscriptions.push(t)}},{key:"_handleMapZoomChange",value:function(){var e=this,t=this._mapsWrapper.subscribeToMapEvent("zoom_changed").subscribe((function(){e._mapsWrapper.getZoom().then((function(t){e.zoom=t,e.zoomChange.emit(t)}))}));this._observableSubscriptions.push(t)}},{key:"_handleIdleEvent",value:function(){var e=this,t=this._mapsWrapper.subscribeToMapEvent("idle").subscribe((function(){e.idle.emit(void 0)}));this._observableSubscriptions.push(t)}},{key:"_handleTilesLoadedEvent",value:function(){var e=this,t=this._mapsWrapper.subscribeToMapEvent("tilesloaded").subscribe((function(){return e.tilesLoaded.emit(void 0)}));this._observableSubscriptions.push(t)}},{key:"_handleMapMouseEvents",value:function(){var e=this;[{name:"click",emitter:this.mapClick},{name:"rightclick",emitter:this.mapRightClick},{name:"dblclick",emitter:this.mapDblClick}].forEach((function(t){var n=e._mapsWrapper.subscribeToMapEvent(t.name).subscribe((function(n){var i={coords:{lat:n.latLng.lat(),lng:n.latLng.lng()},placeId:n.placeId};i.placeId&&!e.showDefaultInfoWindow&&n.stop(),t.emitter.emit(i)}));e._observableSubscriptions.push(n)}))}}]),e}()).\u0275fac=function(e){return new(e||ee)(r.Sb(r.l),r.Sb(z),r.Sb(r.C),r.Sb(q),r.Sb(r.A))},ee.\u0275cmp=r.Mb({type:ee,selectors:[["agm-map"]],hostVars:2,hostBindings:function(e,t){2&e&&r.Jb("sebm-google-map-container",!0)},inputs:{longitude:"longitude",latitude:"latitude",zoom:"zoom",draggable:["mapDraggable","draggable"],disableDoubleClickZoom:"disableDoubleClickZoom",disableDefaultUI:"disableDefaultUI",scrollwheel:"scrollwheel",keyboardShortcuts:"keyboardShortcuts",styles:"styles",usePanning:"usePanning",fitBounds:"fitBounds",scaleControl:"scaleControl",mapTypeControl:"mapTypeControl",panControl:"panControl",rotateControl:"rotateControl",fullscreenControl:"fullscreenControl",mapTypeId:"mapTypeId",clickableIcons:"clickableIcons",showDefaultInfoWindow:"showDefaultInfoWindow",gestureHandling:"gestureHandling",tilt:"tilt",minZoom:"minZoom",maxZoom:"maxZoom",controlSize:"controlSize",backgroundColor:"backgroundColor",draggableCursor:"draggableCursor",draggingCursor:"draggingCursor",zoomControl:"zoomControl",zoomControlOptions:"zoomControlOptions",streetViewControl:"streetViewControl",streetViewControlOptions:"streetViewControlOptions",fitBoundsPadding:"fitBoundsPadding",scaleControlOptions:"scaleControlOptions",mapTypeControlOptions:"mapTypeControlOptions",panControlOptions:"panControlOptions",rotateControlOptions:"rotateControlOptions",fullscreenControlOptions:"fullscreenControlOptions",restriction:"restriction"},outputs:{mapClick:"mapClick",mapRightClick:"mapRightClick",mapDblClick:"mapDblClick",centerChange:"centerChange",boundsChange:"boundsChange",mapTypeIdChange:"mapTypeIdChange",idle:"idle",zoomChange:"zoomChange",mapReady:"mapReady",tilesLoaded:"tilesLoaded"},features:[r.Cb([B,N,N,q,z,V,Z,L,F,ae,se,ce]),r.Bb],ngContentSelectors:x,decls:3,vars:0,consts:[[1,"agm-map-container-inner","sebm-google-map-container-inner"],[1,"agm-map-content"]],template:function(e,t){1&e&&(r.pc(),r.Tb(0,"div",0),r.Yb(1,"div",1),r.oc(2),r.Xb())},styles:[".agm-map-container-inner[_ngcontent-%COMP%] {\n      width: inherit;\n      height: inherit;\n    }\n    .agm-map-content[_ngcontent-%COMP%] {\n      display:none;\n    }"]}),ee._mapOptionsAttributes=["disableDoubleClickZoom","scrollwheel","draggable","draggableCursor","draggingCursor","keyboardShortcuts","zoomControl","zoomControlOptions","styles","streetViewControl","streetViewControlOptions","zoom","mapTypeControl","mapTypeControlOptions","minZoom","maxZoom","panControl","panControlOptions","rotateControl","rotateControlOptions","fullscreenControl","fullscreenControlOptions","scaleControl","scaleControlOptions","mapTypeId","clickableIcons","gestureHandling","tilt","restriction"],ee),le=0,de=((ne=te=function(){function e(t){_classCallCheck(this,e),this._markerManager=t,this.draggable=!1,this.visible=!0,this.openInfoWindow=!0,this.opacity=1,this.zIndex=1,this.clickable=!0,this.animationChange=new r.o,this.markerClick=new r.o,this.markerDblClick=new r.o,this.markerRightClick=new r.o,this.dragStart=new r.o,this.drag=new r.o,this.dragEnd=new r.o,this.mouseOver=new r.o,this.mouseOut=new r.o,this.infoWindow=new r.E,this._markerAddedToManger=!1,this._observableSubscriptions=[],this._fitBoundsDetails$=new h.a(1),this._id=(le++).toString()}return _createClass(e,[{key:"ngAfterContentInit",value:function(){var e=this;this.handleInfoWindowUpdate(),this.infoWindow.changes.subscribe((function(){return e.handleInfoWindowUpdate()}))}},{key:"handleInfoWindowUpdate",value:function(){var e=this;if(this.infoWindow.length>1)throw new Error("Expected no more than one info window.");this.infoWindow.forEach((function(t){t.hostMarker=e}))}},{key:"ngOnChanges",value:function(e){if("string"==typeof this.latitude&&(this.latitude=Number(this.latitude)),"string"==typeof this.longitude&&(this.longitude=Number(this.longitude)),"number"==typeof this.latitude&&"number"==typeof this.longitude){if(!this._markerAddedToManger)return this._markerManager.addMarker(this),this._updateFitBoundsDetails(),this._markerAddedToManger=!0,void this._addEventListeners();(e.latitude||e.longitude)&&(this._markerManager.updateMarkerPosition(this),this._updateFitBoundsDetails()),e.title&&this._markerManager.updateTitle(this),e.label&&this._markerManager.updateLabel(this),e.draggable&&this._markerManager.updateDraggable(this),e.iconUrl&&this._markerManager.updateIcon(this),e.opacity&&this._markerManager.updateOpacity(this),e.visible&&this._markerManager.updateVisible(this),e.zIndex&&this._markerManager.updateZIndex(this),e.clickable&&this._markerManager.updateClickable(this),e.animation&&this._markerManager.updateAnimation(this)}}},{key:"getFitBoundsDetails$",value:function(){return this._fitBoundsDetails$.asObservable()}},{key:"_updateFitBoundsDetails",value:function(){this._fitBoundsDetails$.next({latLng:{lat:this.latitude,lng:this.longitude}})}},{key:"_addEventListeners",value:function(){var e=this,t=this._markerManager.createEventObservable("click",this).subscribe((function(){e.openInfoWindow&&e.infoWindow.forEach((function(e){return e.open()})),e.markerClick.emit(e)}));this._observableSubscriptions.push(t);var n=this._markerManager.createEventObservable("dblclick",this).subscribe((function(){e.markerDblClick.emit(null)}));this._observableSubscriptions.push(n);var i=this._markerManager.createEventObservable("rightclick",this).subscribe((function(){e.markerRightClick.emit(null)}));this._observableSubscriptions.push(i);var r=this._markerManager.createEventObservable("dragstart",this).subscribe((function(t){e.dragStart.emit({coords:{lat:t.latLng.lat(),lng:t.latLng.lng()}})}));this._observableSubscriptions.push(r);var o=this._markerManager.createEventObservable("drag",this).subscribe((function(t){e.drag.emit({coords:{lat:t.latLng.lat(),lng:t.latLng.lng()}})}));this._observableSubscriptions.push(o);var a=this._markerManager.createEventObservable("dragend",this).subscribe((function(t){e.dragEnd.emit({coords:{lat:t.latLng.lat(),lng:t.latLng.lng()}})}));this._observableSubscriptions.push(a);var s=this._markerManager.createEventObservable("mouseover",this).subscribe((function(t){e.mouseOver.emit({coords:{lat:t.latLng.lat(),lng:t.latLng.lng()}})}));this._observableSubscriptions.push(s);var c=this._markerManager.createEventObservable("mouseout",this).subscribe((function(t){e.mouseOut.emit({coords:{lat:t.latLng.lat(),lng:t.latLng.lng()}})}));this._observableSubscriptions.push(c);var u=this._markerManager.createEventObservable("animation_changed",this).subscribe((function(){e.animationChange.emit(e.animation)}));this._observableSubscriptions.push(u)}},{key:"id",value:function(){return this._id}},{key:"toString",value:function(){return"AgmMarker-"+this._id.toString()}},{key:"ngOnDestroy",value:function(){this._markerManager.deleteMarker(this),this._observableSubscriptions.forEach((function(e){return e.unsubscribe()}))}}]),e}()).\u0275fac=function(e){return new(e||ne)(r.Sb(F))},ne.\u0275dir=r.Nb({type:ne,selectors:[["agm-marker"]],contentQueries:function(e,t,n){var i;1&e&&r.Lb(n,K,!1),2&e&&r.Ac(i=r.hc())&&(t.infoWindow=i)},inputs:{latitude:"latitude",longitude:"longitude",title:"title",label:"label",draggable:["markerDraggable","draggable"],iconUrl:"iconUrl",openInfoWindow:"openInfoWindow",opacity:"opacity",visible:"visible",zIndex:"zIndex",animation:"animation",clickable:["markerClickable","clickable"]},outputs:{markerClick:"markerClick",dragStart:"dragStart",drag:"drag",dragEnd:"dragEnd",mouseOver:"mouseOver",mouseOut:"mouseOut",animationChange:"animationChange",markerDblClick:"markerDblClick",markerRightClick:"markerRightClick"},features:[r.Cb([{provide:R,useExisting:Object(r.V)((function(){return te}))}]),r.Bb]}),ne),pe=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getNativeWindow",value:function(){return window}}]),e}(),he=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getNativeDocument",value:function(){return document}}]),e}(),fe=[pe,he],be=function(e){return e[e.HTTP=1]="HTTP",e[e.HTTPS=2]="HTTPS",e[e.AUTO=3]="AUTO",e}({}),me=new r.r("angular-google-maps LAZY_MAPS_API_CONFIG"),ge=((ie=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;return _classCallCheck(this,n),(e=t.call(this)).localeId=a,e._SCRIPT_ID="agmGoogleMapsApiScript",e.callbackName="agmLazyMapsAPILoader",e._config=i||{},e._windowRef=r,e._documentRef=o,e}return _createClass(n,[{key:"load",value:function(){var e=this._windowRef.getNativeWindow();if(e.google&&e.google.maps)return Promise.resolve();if(this._scriptLoadingPromise)return this._scriptLoadingPromise;var t=this._documentRef.getNativeDocument().getElementById(this._SCRIPT_ID);if(t)return this._assignScriptLoadingPromise(t),this._scriptLoadingPromise;var n=this._documentRef.getNativeDocument().createElement("script");return n.type="text/javascript",n.async=!0,n.defer=!0,n.id=this._SCRIPT_ID,n.src=this._getScriptSrc(this.callbackName),this._assignScriptLoadingPromise(n),this._documentRef.getNativeDocument().body.appendChild(n),this._scriptLoadingPromise}},{key:"_assignScriptLoadingPromise",value:function(e){var t=this;this._scriptLoadingPromise=new Promise((function(n,i){t._windowRef.getNativeWindow()[t.callbackName]=function(){n()},e.onerror=function(e){i(e)}}))}},{key:"_getScriptSrc",value:function(e){var t;switch(this._config&&this._config.protocol||be.HTTPS){case be.AUTO:t="";break;case be.HTTP:t="http:";break;case be.HTTPS:t="https:"}var n={v:this._config.apiVersion||"quarterly",callback:e,key:this._config.apiKey,client:this._config.clientId,channel:this._config.channel,libraries:this._config.libraries,region:this._config.region,language:this._config.language||"en-US"!==this.localeId?this.localeId:null};return"".concat(t,"//").concat(this._config.hostAndPath||"maps.googleapis.com/maps/api/js","?").concat(Object.keys(n).filter((function(e){return null!=n[e]})).filter((function(e){return!Array.isArray(n[e])||Array.isArray(n[e])&&n[e].length>0})).map((function(e){var t=n[e];return Array.isArray(t)?{key:e,value:t.join(",")}:{key:e,value:n[e]}})).map((function(e){return"".concat(e.key,"=").concat(e.value)})).join("&"))}}]),n}(W)).\u0275fac=function(e){return new(e||ie)(r.cc(me,8),r.cc(pe),r.cc(he),r.cc(r.v))},ie.\u0275prov=r.Ob({token:ie,factory:ie.\u0275fac}),ie),ve=((oe=re=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"forRoot",value:function(e){return{ngModule:re,providers:[].concat(fe,[{provide:W,useClass:ge},{provide:me,useValue:e}])}}}]),e}()).\u0275mod=r.Qb({type:oe}),oe.\u0275inj=r.Pb({factory:function(e){return new(e||oe)}}),oe)}}]);