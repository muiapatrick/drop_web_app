function _defineProperties(e,n){for(var t=0;t<n.length;t++){var s=n[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function _createClass(e,n,t){return n&&_defineProperties(e.prototype,n),t&&_defineProperties(e,t),e}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"0Tvr":function(e,n,t){"use strict";t.d(n,"a",(function(){return s}));var s=function e(){_classCallCheck(this,e),this.size=6,this.totalElements=0,this.totalPages=0,this.pageNumber=0,this.offset=0}},"632m":function(e,n,t){"use strict";t.r(n),t.d(n,"UserModule",(function(){return E}));var s=t("ofXK"),r=t("3Pt+"),o=t("ZZCA"),i=t("Lm2G"),l=t("tyNb"),u=t("QR1q"),a=t("5vxX"),c=t("lSn3"),p=t("jZhJ"),h=t("0Tvr"),b=t("fXoL"),d=t("4Q0Y");function f(e,n){1&e&&(b.Yb(0,"div",16),b.Yb(1,"div",17),b.Tb(2,"div",18),b.Xb(),b.Xb())}function m(e,n){if(1&e){var t=b.Zb();b.Yb(0,"span",19),b.gc("click",(function(){return b.Dc(t),b.kc().openEditUserModal()})),b.Lc(1,"Edit User"),b.Xb()}}function v(e,n){if(1&e){var t=b.Zb();b.Yb(0,"span",19),b.gc("click",(function(){return b.Dc(t),b.kc().resetPassword()})),b.Lc(1,"Reset Password"),b.Xb()}}function g(e,n){1&e&&(b.Yb(0,"span",20),b.Lc(1," Active"),b.Xb())}function _(e,n){1&e&&(b.Yb(0,"span",21),b.Lc(1,"Not Active"),b.Xb())}function X(e,n){if(1&e&&(b.Yb(0,"span",20),b.Lc(1),b.Xb()),2&e){var t=b.kc().$implicit;b.Db(1),b.Mc(t.shop_name)}}function w(e,n){if(1&e&&(b.Yb(0,"div",22),b.Yb(1,"div",23),b.Yb(2,"div",24),b.Yb(3,"h5",25),b.Lc(4),b.Xb(),b.Yb(5,"p",26),b.Lc(6),b.Xb(),b.Jc(7,X,2,1,"span",11),b.Xb(),b.Xb(),b.Xb()),2&e){var t=n.$implicit;b.Db(4),b.Mc(t.name),b.Db(2),b.Mc(t.description),b.Db(1),b.pc("ngIf",null==t?null:t.shop_name)}}var S,Y,k,L=[{path:"profile",component:(S=function(){function e(n,t,s,r,o){_classCallCheck(this,e),this._formBuilder=n,this._route=t,this._router=s,this._modalService=r,this._userService=o,this.page=new h.a,this.user=new p.a,this.shop=null,this.roleList=[]}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.userNumber=this._route.snapshot.paramMap.get("user_id"),this.shopNumber=this._route.snapshot.paramMap.get("id");var n=window.location.pathname.split("/").pop();this.userInfoForm=this._formBuilder.group({first_name:"",last_name:"",other_name:"",active_user:"",phone_number:"",email_address:""}),"profile"==n?(this.isUserProfile=!0,this.user=this._userService.getAuthenticatedUser(),this.roleList=[],this.user.roles.forEach((function(n){null!=n.shop_id&&null!=n.shop_id||(e.roleList.push({id:n.id,name:n.name,description:n.description}),e.roleList.slice())})),console.log(this.user.shops),this.user.shops.forEach((function(n){console.log("SHOP ID : "+n.id),e.user.roles.forEach((function(t){console.log("ROLE SHOP ID : "+t.shop_id),n.id==t.shop_id&&(e.roleList.push({id:t.id,name:t.name,description:t.description,shop_name:n.shop_name}),e.roleList.slice())}))}))):null==this.userNumber||null==this.userNumber?this._router.navigate(["/drop/shops"]):(this.getUserDetails(),this._modalService.closed.subscribe((function(){return e.getUserDetails()})))}},{key:"getUserDetails",value:function(){var e=this;this.roleList=[],this.loading=!0,this._userService.getUsers(this.page.pageNumber.toString(),"1",null,null,null,null,null,null,this.userNumber).subscribe((function(n){console.log(n),e.user=n.data[0],console.log(e.user),e.shop=Object(c.h)(e.user.shops,e.shopNumber),e.hasShopAdminRole=Object(c.i)(e.user.roles,3,e.shop.id),console.log(e.user.shops),null!=e.shopNumber&&null!=e.shopNumber&&e.user.shops.forEach((function(n){n.shop_number==e.shopNumber&&(e.shop=n)})),e.user.roles.forEach((function(n){n.shop_id==e.shop.id&&(e.roleList.push({id:n.id,name:n.name,description:n.description}),e.roleList.slice())})),e.loading=!1}),(function(n){e.loading=!1}))}},{key:"openEditUserModal",value:function(){this.modalRef=this._modalService.show(u.a,{backdrop:!0,ignoreBackdropClick:!0,class:"modal-lg",data:{isEdit:!0,user:this.user,userShop:this.shop}})}},{key:"resetPassword",value:function(){this.modalRef=this._modalService.show(a.a,{backdrop:!0,ignoreBackdropClick:!0,class:"modal-md",data:{}})}}]),e}(),S.\u0275fac=function(e){return new(e||S)(b.Sb(r.c),b.Sb(l.a),b.Sb(l.e),b.Sb(o.u),b.Sb(d.a))},S.\u0275cmp=b.Mb({type:S,selectors:[["app-profile"]],decls:42,vars:14,consts:[[1,"drop_content"],[1,"row"],[1,"col-md-12","mb-4",2,"padding-top","5px"],["class","col-md-12 col-lg-12 col-sm-6 overlay",4,"ngIf"],[1,"col-md-12","com-sm-12","col-xs-12"],[1,"nvb-bg","app-text-color"],[1,"mb-3"],["class","float-right btn btn-primary btn-sm",3,"click",4,"ngIf"],[1,"px-lg-5"],[1,"col-sm-6","col-md-4"],[1,"app-text-color","mb-1","section-edit-title"],["class","mr-2 badge badge-success",4,"ngIf"],["class","mr-2 badge badge-danger",4,"ngIf"],[1,"section-title","mb-3"],[1,"row","mb-3"],["class","col-sm-12 col-md-4 col-lg-4 col-xl-3 mb-3",4,"ngFor","ngForOf"],[1,"col-md-12","col-lg-12","col-sm-6","overlay"],[1,"spinner-wrapper"],[1,"spinner"],[1,"float-right","btn","btn-primary","btn-sm",3,"click"],[1,"mr-2","badge","badge-success"],[1,"mr-2","badge","badge-danger"],[1,"col-sm-12","col-md-4","col-lg-4","col-xl-3","mb-3"],[1,"card"],[1,"card-body"],[1,"card-title","mb-1"],[1,"card-text","role-description"]],template:function(e,n){1&e&&(b.Yb(0,"div",0),b.Yb(1,"div",1),b.Yb(2,"div",2),b.Yb(3,"div",1),b.Jc(4,f,3,0,"div",3),b.Xb(),b.Yb(5,"div",1),b.Yb(6,"div",4),b.Yb(7,"mdb-card"),b.Yb(8,"mdb-card-header",5),b.Yb(9,"h2",6),b.Lc(10,"User Information "),b.Jc(11,m,2,0,"span",7),b.Jc(12,v,2,0,"span",7),b.Xb(),b.Xb(),b.Yb(13,"mdb-card-body",8),b.Yb(14,"div",1),b.Yb(15,"div",9),b.Yb(16,"p",10),b.Lc(17,"Names"),b.Xb(),b.Yb(18,"h2"),b.Lc(19),b.lc(20,"titlecase"),b.lc(21,"titlecase"),b.Xb(),b.Xb(),b.Yb(22,"div",9),b.Yb(23,"p",10),b.Lc(24,"Email"),b.Xb(),b.Yb(25,"h2"),b.Lc(26),b.Xb(),b.Xb(),b.Yb(27,"div",9),b.Yb(28,"p",10),b.Lc(29,"Phone Number"),b.Xb(),b.Yb(30,"h2"),b.Lc(31),b.Xb(),b.Xb(),b.Yb(32,"div",9),b.Yb(33,"p",10),b.Lc(34,"Status"),b.Xb(),b.Yb(35,"span"),b.Jc(36,g,2,0,"span",11),b.Jc(37,_,2,0,"span",12),b.Xb(),b.Xb(),b.Xb(),b.Yb(38,"h2",13),b.Lc(39,"User Roles"),b.Xb(),b.Yb(40,"div",14),b.Jc(41,w,8,3,"div",15),b.Xb(),b.Xb(),b.Xb(),b.Xb(),b.Xb(),b.Xb(),b.Xb(),b.Xb()),2&e&&(b.Db(4),b.pc("ngIf",n.loading),b.Db(7),b.pc("ngIf",n.hasShopAdminRole),b.Db(1),b.pc("ngIf",n.isUserProfile),b.Db(7),b.Oc("",b.mc(20,10,null==n.user?null:n.user.first_name)," ",b.mc(21,12,null==n.user?null:n.user.last_name),""),b.Db(7),b.Mc(null==n.user?null:n.user.email_address),b.Db(5),b.Mc(null==n.user?null:n.user.phone_number),b.Db(5),b.pc("ngIf",1==(null==n.user?null:n.user.enabled)),b.Db(1),b.pc("ngIf",0==(null==n.user?null:n.user.enabled)),b.Db(4),b.pc("ngForOf",n.roleList))},directives:[s.j,o.y,o.z,o.x,s.i],pipes:[s.o],styles:[""]}),S)}],y=((Y=function e(){_classCallCheck(this,e)}).\u0275mod=b.Qb({type:Y}),Y.\u0275inj=b.Pb({factory:function(e){return new(e||Y)},imports:[[l.i.forChild(L)],l.i]}),Y),C=t("TXLM"),E=((k=function e(){_classCallCheck(this,e)}).\u0275mod=b.Qb({type:k}),k.\u0275inj=b.Pb({factory:function(e){return new(e||k)},imports:[[s.b,y,r.g,r.q,o.r.forRoot(),o.N,i.b,C.a]]}),k)},BCCV:function(e,n,t){"use strict";t.d(n,"a",(function(){return c}));var s=t("AytR"),r=t("tk/3"),o=t("2Vo4"),i=t("z6cu"),l=t("JIr8"),u=t("fXoL"),a=t("5eHb"),c=function(){var e=function(){function e(n,t){_classCallCheck(this,e),this._httpClient=n,this._toastr=t,this.baseUrl=s.a.base_url,this.shopIdSource=new o.a("default message"),this.shopId=this.shopIdSource.asObservable(),this.openShopsChange=new o.a(null),this.nearOpenShop=this.openShopsChange.asObservable()}return _createClass(e,[{key:"createShop",value:function(e){return this._httpClient.post(this.baseUrl+"shop",e)}},{key:"updateShop",value:function(e,n){return this._httpClient.put(this.baseUrl+"shop/"+e,n)}},{key:"getShops",value:function(e,n,t,s,o,u){var a=this,c=(new r.e).set("page",e).set("page_size",n);return null!=o&&(c=c.append("shop_name",o)),null!=s&&(c=c.append("ids",s)),null!=t&&(c=c.append("operator_id",t)),null!=u&&(c=c.append("shop_number",u)),this._httpClient.get(this.baseUrl+"shop",{params:c}).pipe(Object(l.a)((function(e){if(e.error instanceof ErrorEvent);else{if(500===e.status)return a._toastr.error("An error occurred while getting shops"),Object(i.a)(e);if(401===e.status)return Object(i.a)(e);if(0===e.status)return a._toastr.error("Something went wrong, Please try again later"),Object(i.a)(e)}return a._toastr.error(e.error.api_code_description),Object(i.a)(e)})))}},{key:"changeShopId",value:function(e){this.shopIdSource.next(e)}},{key:"changeOpenShops",value:function(e){console.log("CHANGE SHOPS"),console.log(e),this.openShopsChange.next(e)}}]),e}();return e.\u0275fac=function(n){return new(n||e)(u.cc(r.b),u.cc(a.b))},e.\u0275prov=u.Ob({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},lSn3:function(e,n,t){"use strict";function s(e){if(e&&(null!=e.value||null!=e.value)){var n=e.value;return new RegExp("^((?!.*[\\s])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,}))").test(n)?null:{weak:!0}}}function r(e){if(e&&(null!=e.value||null!=e.value)){var n=e.value,t=e.root.get("password");return t&&t.value!==n?{notmatch:!0}:null}}function o(e){if(e&&(null!=e.value||null!=e.value)){var n=e.value,t=e.root.get("confirmPassword");return!t||null==t&&null==t||!t.value||null==t.value&&null==t.value||n===t.value||e.root.get("confirmPassword").setValue(""),null}}function i(e){if(e&&(null!=e.value||null!=e.value)){var n=e.value;return new RegExp("\\S").test(n)?null:{hasWhiteSpace:!0}}}function l(e){if(e&&(null!=e.value||null!=e.value)){var n=e.value;return new RegExp("^((254[0-9]{9})|(07[0-9]{8}))$").test(n)?null:{invalidPhone:!0}}}function u(e){if(e&&(null!=e||null!=e))return{validPhone:new RegExp("^((254[0-9]{9})|(07[0-9]{8}))$").test(e)}}function a(e){if(e&&(null!=e||null!=e))return{validNumeric:new RegExp("^-?(0|[1-9]\\d*)?$").test(e)}}function c(e){if(e&&(null!=e.value||null!=e.value)){var n=e.value;return new RegExp("^-?([0-9]|([0-9]\\d*).?([0-9]\\d*))?$").test(n)?null:{invalidAmount:!0}}}function p(e,n,t){return null!=e&&null!=e&&0!=e.length&&function(e,n){var t=[];return e.forEach((function(e){e.shop_id==n&&(t.push(e.id),t.slice())})),t}(e,t).includes(n)}function h(e,n){var t=null;return null==e||null==e||0==e.length||e.forEach((function(e){e.shop_number==n&&(t={id:e.id,is_open:e.is_open,user_id:e.user_id,shop_number:e.shop_number,shop_name:e.shop_name,shop_location:e.shop_location,phone_number:e.phone_number,latitude:e.latitude,longitude:e.longitude})})),t}t.d(n,"j",(function(){return s})),t.d(n,"g",(function(){return r})),t.d(n,"f",(function(){return o})),t.d(n,"b",(function(){return i})),t.d(n,"d",(function(){return l})),t.d(n,"e",(function(){return u})),t.d(n,"c",(function(){return a})),t.d(n,"a",(function(){return c})),t.d(n,"i",(function(){return p})),t.d(n,"h",(function(){return h}))}}]);