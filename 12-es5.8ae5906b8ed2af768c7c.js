function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,o){return t&&_defineProperties(e.prototype,t),o&&_defineProperties(e,o),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{Y3tR:function(e,t,o){"use strict";o.r(t),o.d(t,"DropModule",(function(){return ne}));var i,n,r,s=o("ofXK"),a=o("ZZCA"),c=o("tyNb"),l=o("pSwl"),p=o("fXoL"),d=o("pxUr"),h=o("GBiA"),m=o("5eHb"),u=o("BCCV"),b=o("P6yk"),g=((i=function(){function e(t){_classCallCheck(this,e),this.gmapsApi=t,this.travelMode="DRIVING",this.transitOptions=void 0,this.drivingOptions=void 0,this.waypoints=[],this.optimizeWaypoints=!0,this.provideRouteAlternatives=!1,this.avoidHighways=!1,this.avoidTolls=!1,this.visible=!0,this.onChange=new p.o,this.onResponse=new p.o,this.sendInfoWindow=new p.o,this.status=new p.o,this.originDrag=new p.o,this.destinationDrag=new p.o,this.directionsService=void 0,this.directionsDisplay=void 0,this.waypointsMarker=[],this.isFirstChange=!0}return _createClass(e,[{key:"ngOnInit",value:function(){!0===this.visible&&this.directionDraw()}},{key:"ngOnChanges",value:function(e){if(this.visible){if(this.isFirstChange)return void 0===this.directionsDisplay&&this.directionDraw(),void(this.isFirstChange=!1);void 0!==e.renderOptions&&!1===e.renderOptions.firstChange&&(this.removeMarkers(),this.removeDirections()),this.directionDraw()}else try{this.removeMarkers(),this.removeDirections()}catch(t){}}},{key:"ngOnDestroy",value:function(){this.destroyMarkers(),this.removeDirections()}},{key:"directionDraw",value:function(){var e=this;this.gmapsApi.getNativeMap().then((function(t){void 0===e.directionsDisplay&&(e.directionsDisplay=new google.maps.DirectionsRenderer(e.renderOptions),e.directionsDisplay.setMap(t),e.directionsDisplay.addListener("directions_changed",(function(){e.onChange.emit(e.directionsDisplay.getDirections())}))),void 0===e.directionsService&&(e.directionsService=new google.maps.DirectionsService),e.directionsDisplay.setPanel(void 0===e.panel?null:e.panel),"object"==typeof e.renderRoute&&null!==e.renderRoute?(e.directionsDisplay.setDirections(e.renderRoute),e.renderRoute=null):e.directionsService.route({origin:e.origin,destination:e.destination,travelMode:e.travelMode,transitOptions:e.transitOptions,drivingOptions:e.drivingOptions,waypoints:e.waypoints,optimizeWaypoints:e.optimizeWaypoints,provideRouteAlternatives:e.provideRouteAlternatives,avoidHighways:e.avoidHighways,avoidTolls:e.avoidTolls},(function(o,i){switch(e.onResponse.emit(o),e.status.emit(i),i){case"OK":if(e.directionsDisplay.setDirections(o),void 0!==e.markerOptions){e.destroyMarkers();var n=o.routes[0].legs[0];try{void 0!==e.markerOptions.origin&&(e.markerOptions.origin.map=t,e.markerOptions.origin.position=n.start_location,e.originMarker=e.setMarker(t,e.originMarker,e.markerOptions.origin,n.start_address),e.markerOptions.origin.draggable&&e.originMarker.addListener("dragend",(function(){e.origin=e.originMarker.position,e.directionDraw(),e.originDrag.emit(e.origin)}))),void 0!==e.markerOptions.destination&&(e.markerOptions.destination.map=t,e.markerOptions.destination.position=n.end_location,e.destinationMarker=e.setMarker(t,e.destinationMarker,e.markerOptions.destination,n.end_address),e.markerOptions.destination.draggable&&e.destinationMarker.addListener("dragend",(function(){e.destination=e.destinationMarker.position,e.directionDraw(),e.destinationDrag.emit(e.destination)}))),void 0!==e.markerOptions.waypoints&&e.waypoints.forEach((function(o,i){Array.isArray(e.markerOptions.waypoints)?(e.markerOptions.waypoints[i].map=t,e.markerOptions.waypoints[i].position=n.via_waypoints[i],e.waypointsMarker.push(e.setMarker(t,o,e.markerOptions.waypoints[i],n.via_waypoints[i]))):(e.markerOptions.waypoints.map=t,e.markerOptions.waypoints.position=n.via_waypoints[i],e.waypointsMarker.push(e.setMarker(t,o,e.markerOptions.waypoints,n.via_waypoints[i])))}))}catch(r){console.error("MarkerOptions error.",r)}}}}))}))}},{key:"setMarker",value:function(e,t,o,i){var n=this;return void 0===this.infoWindow&&(this.infoWindow=new google.maps.InfoWindow({}),this.sendInfoWindow.emit(this.infoWindow)),(t=new google.maps.Marker(o)).clickable&&t.addListener("click",(function(){n.infoWindow.setContent(void 0===o.infoWindow?i:o.infoWindow),n.infoWindow.open(e,t)})),t}},{key:"removeMarkers",value:function(){void 0!==this.originMarker&&this.originMarker.setMap(null),void 0!==this.destinationMarker&&this.destinationMarker.setMap(null),this.waypointsMarker.forEach((function(e){void 0!==e&&e.setMap(null)}))}},{key:"removeDirections",value:function(){void 0!==this.directionsDisplay&&(this.directionsDisplay.setPanel(null),this.directionsDisplay.setMap(null),this.directionsDisplay=void 0)}},{key:"destroyMarkers",value:function(){try{void 0!==this.originMarker&&(google.maps.event.clearListeners(this.originMarker,"click"),this.markerOptions.origin.draggable&&google.maps.event.clearListeners(this.originMarker,"dragend")),void 0!==this.destinationMarker&&(google.maps.event.clearListeners(this.destinationMarker,"click"),this.markerOptions.origin.draggable&&google.maps.event.clearListeners(this.destinationMarker,"dragend")),this.waypointsMarker.forEach((function(e){void 0!==e&&google.maps.event.clearListeners(e,"click")})),this.removeMarkers()}catch(e){console.error("Can not reset custom marker.",e)}}}]),e}()).\u0275fac=function(e){return new(e||i)(p.Sb(d.e))},i.\u0275dir=p.Nb({type:i,selectors:[["agm-direction"]],inputs:{travelMode:"travelMode",transitOptions:"transitOptions",drivingOptions:"drivingOptions",waypoints:"waypoints",optimizeWaypoints:"optimizeWaypoints",provideRouteAlternatives:"provideRouteAlternatives",avoidHighways:"avoidHighways",avoidTolls:"avoidTolls",visible:"visible",renderRoute:"renderRoute",origin:"origin",destination:"destination",infoWindow:"infoWindow",renderOptions:"renderOptions",panel:"panel",markerOptions:"markerOptions"},outputs:{onChange:"onChange",onResponse:"onResponse",sendInfoWindow:"sendInfoWindow",status:"status",originDrag:"originDrag",destinationDrag:"destinationDrag"},features:[p.Bb]}),i),f=((r=n=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"forRoot",value:function(){return{ngModule:n}}},{key:"forChild",value:function(){return{ngModule:n}}}]),e}()).\u0275mod=p.Qb({type:r}),r.\u0275inj=p.Pb({factory:function(e){return new(e||r)}}),r),v=["search"];function _(e,t){if(1&e){var o=p.Zb();p.Yb(0,"agm-marker",15),p.gc("markerClick",(function(){p.Ec(o);var e=t.$implicit,i=t.index;return p.kc().clickedMarker(e.label,i)}))("dragEnd",(function(e){p.Ec(o);var i=t.$implicit;return p.kc().markerDragEnd(i,e)})),p.Yb(1,"agm-info-window"),p.Yb(2,"strong"),p.Mc(3),p.Xb(),p.Xb(),p.Xb()}if(2&e){var i=t.$implicit;p.qc("markerClickable",i.clickable)("latitude",i.lat)("longitude",i.lng)("label",i.label)("markerDraggable",i.draggable)("iconUrl",i.icon)("animation",i.animation),p.Db(3),p.Nc(i.title)}}function k(e,t){if(1&e&&p.Tb(0,"agm-direction",16),2&e){var o=p.kc();p.qc("origin",o.origin)("destination",o.destination)}}var y,I=((y=function(){function e(t,o,i,n,r,s,a){var c=this;_classCallCheck(this,e),this._mapsAPILoader=t,this._ngZone=o,this._openShopsService=i,this._toastr=n,this._router=r,this._shopService=s,this._dropService=a,this.zoom=15,this.markers=[],this.openShops=[],this._openShopsService.shopsCountChange.subscribe((function(e){c.selectedShopId=null,c.openShops=e,c.removeMarkers(),c.markers.push({lat:c.currentLat,lng:c.currentLong,draggable:!0,clickable:!1,label:"Drag the Red marker to Place you want to See shops around.",animation:"BOUNCE",title:"My Position"}),c.openShops.forEach((function(e){c.markers.push({lat:e.position.geopoint.latitude,lng:e.position.geopoint.longitude,draggable:!1,clickable:!0,icon:"http://maps.google.com/mapfiles/ms/icons/green-dot.png",title:e.shop_name,shop_id:e.id})}))}))}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;console.log("FROM DROP ITEM"),this._dropService.selectedShopLoc.subscribe((function(t){e.selectedLocation=t,console.log(t)})),this._dropService.currentItemAction.subscribe((function(t){e.item_action=t,console.log(t)})),this._mapsAPILoader.load().then((function(){e.setCurrentLocation();var t=new google.maps.places.Autocomplete(e.searchElementRef.nativeElement);t.addListener("place_changed",(function(){e._ngZone.run((function(){e.show_path=!1,e.selectedShopId=null;var o=t.getPlace();null!=o.geometry&&(console.log("Place LAT : "+o.geometry.location.lat()),console.log("Place LONG : "+o.geometry.location.lng()),e.currentLat=o.geometry.location.lat(),e.currentLong=o.geometry.location.lng(),e._openShopsService.changeCurrentPosition(e.currentLat,e.currentLong))}))}))}))}},{key:"setCurrentLocation",value:function(){var e=this;"geolocation"in navigator?"edit"==this.item_action&&null!=this.selectedLocation?(this.currentLat=this.selectedLocation.lat,this.currentLong=this.selectedLocation.long,this.markers.push({lat:this.currentLat,lng:this.currentLong,draggable:!0,clickable:!1,label:"Drag the Red marker to Place you want to See shops around.",animation:"BOUNCE",title:this.selectedLocation.shop_name}),this._openShopsService.changeCurrentPosition(this.currentLat,this.currentLong)):navigator.geolocation.getCurrentPosition((function(t){e.currentLat=t.coords.latitude,e.currentLong=t.coords.longitude,e.markers.push({lat:e.currentLat,lng:e.currentLong,draggable:!0,clickable:!1,label:"Drag the Red marker to Place you want to See shops around.",animation:"BOUNCE",title:"My Position"}),e._openShopsService.changeCurrentPosition(e.currentLat,e.currentLong)}),(function(t){e._toastr.error("Unable to access your current location")})):alert("Geolocation not supported!!")}},{key:"mapReady",value:function(e){this.map=e,this.map.controls[google.maps.ControlPosition.RIGHT_TOP].push(document.getElementById("btn-drop-control")),this.map.controls[google.maps.ControlPosition.RIGHT_TOP].push(document.getElementById("btn-pick-control")),this.map.controls[google.maps.ControlPosition.RIGHT_TOP].push(document.getElementById("btn-hover-control"))}},{key:"removeMarkers",value:function(){this.markers.splice(0,this.markers.length)}},{key:"markerDragEnd",value:function(e,t){this.currentLat=t.coords.lat,this.currentLong=t.coords.lng,this._openShopsService.changeCurrentPosition(this.currentLat,this.currentLong)}},{key:"clickedMarker",value:function(e,t){var o=this.markers[t];o.clickable&&(this.show_path=!0,this.origin={lat:this.currentLat,lng:this.currentLong},this.destination={lat:o.lat,lng:o.lng},this.selectedShopId=o.shop_id)}},{key:"dropItem",value:function(){void 0===this.openShops||this.openShops.length<=0?this._toastr.error("The are not shops around you.","No Open Shops"):(this._openShopsService.setSelectedShop(this.selectedShopId),this._shopService.changeShopId(this.selectedShopId),this._shopService.changeOpenShops(this.openShops),this._router.navigate(["drop/item"]))}},{key:"pickItem",value:function(){console.log("Pick Item")}}]),e}()).\u0275fac=function(e){return new(e||y)(p.Sb(d.f),p.Sb(p.A),p.Sb(h.a),p.Sb(m.b),p.Sb(c.e),p.Sb(u.a),p.Sb(b.a))},y.\u0275cmp=p.Mb({type:y,selectors:[["app-drop"]],viewQuery:function(e,t){var o;1&e&&p.Sc(v,!0),2&e&&p.Ac(o=p.hc())&&(t.searchElementRef=o.first)},decls:15,vars:10,consts:[[1,"drop_map"],[1,"row"],[1,"col-md-12","mb-4",2,"padding-top","5px"],["id","map"],[3,"latitude","longitude","zoom","minZoom","maxZoom","fullscreenControl","fullscreenControlOptions","streetViewControl","mapReady"],["id","btn-drop-control",1,"btn","btn-outline-danger","btn-sm","waves-effect","controls","btn-control",3,"click"],["aria-hidden","true",1,"fa","fa-tint"],["id","btn-pick-control",1,"btn","btn-outline-info","btn-sm","waves-effect","btn-control",3,"click"],[1,"fas","fa-hand-holding"],[3,"markerClickable","latitude","longitude","label","markerDraggable","iconUrl","animation","markerClick","dragEnd",4,"ngFor","ngForOf"],[3,"origin","destination",4,"ngIf"],[1,"tools","w-50","d-flex"],[1,"form-group","w-75","flex-center"],["type","text","placeholder","Search nearest shop by location, or building or road","autocorrect","off","autocapitalize","off","spellcheck","off",1,"form-control",3,"key.enter"],["search",""],[3,"markerClickable","latitude","longitude","label","markerDraggable","iconUrl","animation","markerClick","dragEnd"],[3,"origin","destination"]],template:function(e,t){1&e&&(p.Yb(0,"div",0),p.Yb(1,"div",1),p.Yb(2,"div",2),p.Yb(3,"div",3),p.Yb(4,"agm-map",4),p.gc("mapReady",(function(e){return t.mapReady(e)})),p.Yb(5,"button",5),p.gc("click",(function(){return t.dropItem()})),p.Tb(6,"i",6),p.Xb(),p.Yb(7,"button",7),p.gc("click",(function(){return t.pickItem()})),p.Tb(8,"i",8),p.Xb(),p.Kc(9,_,4,8,"agm-marker",9),p.Kc(10,k,1,2,"agm-direction",10),p.Xb(),p.Yb(11,"div",11),p.Yb(12,"div",12),p.Yb(13,"input",13,14),p.gc("key.enter",(function(e){return e.preventDefault()})),p.Xb(),p.Xb(),p.Xb(),p.Xb(),p.Xb(),p.Xb(),p.Xb()),2&e&&(p.Db(4),p.qc("latitude",t.currentLat)("longitude",t.currentLong)("zoom",t.zoom)("minZoom",7)("maxZoom",20)("fullscreenControl",!0)("fullscreenControlOptions",t.screenOptions)("streetViewControl",!1),p.Db(5),p.qc("ngForOf",t.markers),p.Db(1),p.qc("ngIf",t.show_path))},directives:[d.c,s.i,s.j,d.d,d.b,g],styles:['#map[_ngcontent-%COMP%]{height:100vh;width:100%;padding-bottom:55.25%}.drop_map[_ngcontent-%COMP%]{padding-left:0!important;padding-right:9.5px!important}.tools[_ngcontent-%COMP%]{position:fixed;top:13%;right:20%;cursor:pointer}.tools_actions[_ngcontent-%COMP%]{z-index:9999;position:fixed;top:20%;left:95.5%;right:20px}agm-map[_ngcontent-%COMP%]{height:100vh}.btn-control[_ngcontent-%COMP%]{background:#fff none repeat scroll 0 0;margin:10px;padding:0;position:absolute;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border-radius:2px;height:40px;width:40px;box-shadow:0 1px 4px -1px rgba(0,0,0,.3);overflow:hidden;top:36px;right:0}.btn-control[_ngcontent-%COMP%]:hover{transition:.5s;width:60px}.btn-control[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{display:inline-block;position:relative;transition:.5s}.btn-control[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:after{position:absolute;opacity:0;top:0;transition:.5s}.btn-control[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{padding-right:40px}.btn-control[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]:after{opacity:1;right:0}#btn-drop-control[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:after{content:"Drop"}#btn-drop-control[_ngcontent-%COMP%]:hover{background:#c00d1c}#btn-pick-control[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:after{content:"Pick"}#btn-pick-control[_ngcontent-%COMP%]:hover{background:#0f7254}']}),y),S=o("0EQZ"),M=o("0Tvr"),C=o("3Pt+"),w=o("lSn3"),O=o("Lm2G");function X(e,t){1&e&&(p.Yb(0,"div",43),p.Yb(1,"div",44),p.Tb(2,"div",45),p.Xb(),p.Xb())}function D(e,t){1&e&&(p.Yb(0,"div",43),p.Yb(1,"div",44),p.Tb(2,"div",46),p.Xb(),p.Xb())}function Y(e,t){1&e&&(p.Yb(0,"mdb-error"),p.Mc(1,"Enter shop name to search"),p.Xb())}function P(e,t){if(1&e){var o=p.Zb();p.Yb(0,"tr",47),p.gc("click",(function(){p.Ec(o);var e=t.$implicit;return p.kc().checkboxLabel(e)})),p.Yb(1,"td"),p.Mc(2),p.Xb(),p.Yb(3,"td"),p.Yb(4,"strong"),p.Mc(5),p.Xb(),p.Xb(),p.Yb(6,"td"),p.Mc(7),p.Xb(),p.Yb(8,"td"),p.Mc(9),p.Xb(),p.Yb(10,"td"),p.Yb(11,"mdb-checkbox",48),p.gc("click",(function(e){return p.Ec(o),e.stopPropagation()}))("change",(function(){p.Ec(o);var e=t.$implicit;return p.kc().checkboxLabel(e)})),p.Xb(),p.Xb(),p.Xb()}if(2&e){var i=t.$implicit,n=t.index,r=p.kc();p.Db(2),p.Oc("",r.shopNumber(n),"."),p.Db(3),p.Nc(null==i?null:i.shop_name),p.Db(2),p.Nc(null==i?null:i.shop_location),p.Db(2),p.Nc(null==i?null:i.phone_number),p.Db(2),p.qc("checked",r.selection.isSelected(i))}}function F(e,t){1&e&&(p.Yb(0,"mdb-error"),p.Mc(1,"Item Name Required"),p.Xb())}function L(e,t){if(1&e&&(p.Yb(0,"option",49),p.Mc(1),p.Xb()),2&e){var o=t.$implicit;p.rc("value",o),p.Db(1),p.Nc(o)}}function x(e,t){1&e&&(p.Yb(0,"mdb-error"),p.Mc(1,"Item Type Required"),p.Xb())}function N(e,t){if(1&e&&(p.Yb(0,"option",49),p.Mc(1),p.Xb()),2&e){var o=t.$implicit;p.rc("value",o),p.Db(1),p.Nc(o)}}function T(e,t){1&e&&(p.Yb(0,"mdb-error"),p.Mc(1,"Item Size Required"),p.Xb())}function E(e,t){1&e&&(p.Yb(0,"mdb-error"),p.Mc(1,"Name of Person to pick is required"),p.Xb())}function q(e,t){1&e&&(p.Yb(0,"mdb-error"),p.Mc(1,"Valid Phone Number of Person to pick is required"),p.Xb())}function R(e,t){if(1&e&&(p.Yb(0,"div",1),p.Yb(1,"div",50),p.Yb(2,"div",28),p.Tb(3,"input",51),p.Yb(4,"label",52),p.Mc(5,"Other Person Name"),p.Xb(),p.Kc(6,E,2,0,"mdb-error",17),p.Xb(),p.Xb(),p.Yb(7,"div",50),p.Yb(8,"div",28),p.Tb(9,"input",53),p.Yb(10,"label",54),p.Mc(11,"Other Person Phone"),p.Xb(),p.Kc(12,q,2,0,"mdb-error",17),p.Xb(),p.Xb(),p.Xb()),2&e){var o=p.kc();p.Db(6),p.qc("ngIf",o.otherToPick&&o.isInvalidOtherName),p.Db(6),p.qc("ngIf",o.otherToPick&&o.isInvalidOtherPhone)}}function V(e,t){1&e&&(p.Yb(0,"span"),p.Mc(1,"Drop Now"),p.Xb())}function z(e,t){1&e&&(p.Yb(0,"span"),p.Tb(1,"i",55),p.Mc(2," Dropping... "),p.Xb())}var A,W,K=[{path:"",component:(A=function(){function e(t,o,i,n,r,s){_classCallCheck(this,e),this._formBuilder=t,this._shopService=o,this._openShopService=i,this._router=n,this._dropService=r,this._toastr=s,this.page=new M.a,this.MAX_SIZE=3,this.selection=new S.c(!1,[]),this.nearestShops=[],this.openShops=[],this.openShopsIds="",this.itemTypes=["Envelope","Electronic","Computer","Other"],this.itemSizes=["Larger Eg Large Box","Medium E.g Medium Sized box","Small Eg. Envelopes"],this.search_shop_label="Search Shop by location",this.item=null}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.otherToPick=!1,this.itemInfoForm=this._formBuilder.group({item_name:["",C.s.compose([C.s.required,w.b])],item_type:["",C.s.compose([C.s.required])],item_size:["",C.s.compose([C.s.required])],other_info:"",other_person_name:"",other_person_phone:"",other_person_pick:""}),this.searchForm=this._formBuilder.group({shop_name:["",C.s.compose([C.s.required])]}),this.searchForm.get("shop_name").valueChanges.pipe().subscribe((function(t){e.page.pageNumber=0,e.page_changed=!1,e.searchForm.valid?(e.loading=!0,e.nearestShops=[],e.searchName=t,e.getShops()):(e.searchName="",e.getShops())})),this.search=!1,this.searchName="",this.page.pageNumber=0,this._shopService.shopId.subscribe((function(t){e.shopId=t})),this._dropService.currentItemAction.subscribe((function(t){e.item_action=null==t||null==t?null:t})),this._dropService.currentItemData.subscribe((function(t){console.log("ITEM TO EDIT"),console.log(t),e.item=t})),this._shopService.nearOpenShop.subscribe((function(t){if(e.openShops=t,null==e.openShops||e.openShops.length<=0)if(null==e.item_action)e._router.navigate(["/drop/item/near-shops"]);else{var o={id:e.item.shop.id.toString(),shop_name:e.item.shop.shop_name,shop_location:e.item.shop.shop_location,phone_number:e.item.shop.phone_number,latitude:e.item.shop.latitude,longitude:e.item.shop.longitude,is_open:e.item.shop.is_open};e.nearestShops.push(o),e.checkboxLabel(o)}else e.openShops.forEach((function(t){e.openShopsIds+=t.id+","})),e.getShops();"edit"==e.item_action&&null!=e.item&&(e.search_shop_label="Change Shop",e.itemInfoForm.get("item_name").setValue(e.item.item_name),e.itemInfoForm.get("item_type").setValue(e.item.item_type),e.itemInfoForm.get("item_size").setValue(e.item.item_size),e.itemInfoForm.get("other_info").setValue(e.item.item_description),e.itemInfoForm.get("other_person_pick").setValue(e.item.is_other_pick),e.checkboxToPick({checked:e.item.is_other_pick}),e.itemInfoForm.get("other_person_name").setValue(e.item.other_person_name),e.itemInfoForm.get("other_person_phone").setValue(e.item.other_person_phone))}))}},{key:"isTouched",value:function(e){return this.searchForm.controls[e].touched}},{key:"isInValid",value:function(e,t){return this.searchForm.controls[e].hasError(t)}},{key:"isInValidItemFormisInValid",value:function(e,t){return this.searchForm.controls[e].hasError(t)}},{key:"isTouchedItemForm",value:function(e){return this.itemInfoForm.controls[e].touched}},{key:"isInValidItemForm",value:function(e,t){return this.itemInfoForm.controls[e].hasError(t)}},{key:"goNext",value:function(e){e.next()}},{key:"getShops",value:function(){var e=this;this.shopSelected=!1,this.loading=!0,this.nearestShops=[],this._shopService.getShops(this.page.pageNumber.toString(),this.page.size.toString(),null,this.openShopsIds,this.searchName).subscribe((function(t){console.log(t),e.page.totalElements=t.meta.total_elements,e.page.totalPages=e.search?e.page.totalPages:t.meta.total_elements>0?Math.ceil(t.meta.total_elements/e.page.size):0,e.nearestShops=t.data,e.loading=!1,null!=e.shopId&&null!=e.shopId&&(console.log("SHOP ID SEL : "+e.shopId),e.nearestShops.forEach((function(t){t.id==e.shopId&&e.checkboxLabel(t)})))}),(function(t){e.loading=!1}))}},{key:"shopNumber",value:function(e){return this.page_changed?(this.page.pageNumber-1)*this.page.size+e+1:e+1}},{key:"pageChanged",value:function(e){this.page.pageNumber=e.page,this.page_changed=!0,this.getShops()}},{key:"checkboxLabel",value:function(e){return this.shopId="",this.selection.toggle(e),console.log(e),console.log(this.selection.selected),this.shopSelected=0!=this.selection.selected.length,"".concat(this.selection.isSelected(e)?"deselect":"select"," shop ").concat(e.position+1)}},{key:"checkboxToPick",value:function(e){console.log("CHECK CHECKBOX"),console.log(e),this.otherToPick=e.checked,this.otherToPick?(this.itemInfoForm.controls.other_person_name.setValidators([C.s.compose([C.s.required,w.b])]),this.itemInfoForm.controls.other_person_phone.setValidators([C.s.compose([C.s.required,w.b,w.d])])):(this.itemInfoForm.controls.other_person_name.reset(),this.itemInfoForm.controls.other_person_phone.reset(),this.itemInfoForm.controls.other_person_name.markAsUntouched(),this.itemInfoForm.controls.other_person_phone.markAsUntouched(),this.itemInfoForm.controls.other_person_name.clearValidators(),this.itemInfoForm.controls.other_person_phone.clearValidators()),this.itemInfoForm.controls.other_person_name.updateValueAndValidity(),this.itemInfoForm.controls.other_person_phone.updateValueAndValidity()}},{key:"dropItemNow",value:function(){var e=this;console.log("DROP NOW!"),console.log("SHOP SELECTED ? : "+this.shopSelected),this.submitting=!0;var t={item_name:this.itemInfoForm.controls.item_name.value,item_description:this.itemInfoForm.controls.other_info.value,item_type:this.itemInfoForm.controls.item_type.value,item_size:this.itemInfoForm.controls.item_size.value,other_person_name:this.itemInfoForm.controls.other_person_name.value,other_person_phone:this.itemInfoForm.controls.other_person_phone.value,shop_id:this.selection.selected[0].id,other_pick:this.otherToPick};"edit"==this.item_action?this._dropService.updateItem(this.item.id.toString(),t).subscribe((function(t){e._toastr.success("Item Updated successfuly.","SUCCESSFULL DROP"),e.submitting=!1,e._router.navigate(["/drop/item/list"])}),(function(t){400==t.status&&e._toastr.error("Invalid Request Parameters not permitted"),409==t.status&&e._toastr.error(t.error.api_code_description),console.log(t),e.submitting=!1})):this._dropService.dropItem(t).subscribe((function(t){e._toastr.success("Item Dropped successfuly.","SUCCESSFULL DROP"),e.submitting=!1,e._router.navigate(["/drop/item/list"])}),(function(t){400==t.status&&e._toastr.error("Invalid Request Parameters not permitted"),409==t.status&&e._toastr.error(t.error.api_code_description),console.log(t),e.submitting=!1}))}},{key:"changeShop",value:function(){"edit"==this.item_action?(this._dropService.setShopLocation({lat:this.item.shop.latitude,long:this.item.shop.longitude,shop_name:this.item.shop.shop_name}),this._router.navigate(["/drop/item/near-shops"])):this._router.navigate(["/drop/item/near-shops"])}},{key:"isInvalidShopName",get:function(){return this.isInValid("shop_name","required")&&this.isTouched("shop_name")}},{key:"isInvalidItemName",get:function(){return(this.isInValidItemForm("item_name","required")||this.isInValidItemForm("item_name","hasWhiteSpace"))&&this.isTouchedItemForm("item_name")}},{key:"isInvalidItemType",get:function(){return this.isInValidItemForm("item_type","required")&&this.isTouchedItemForm("item_type")}},{key:"isInvalidItemSize",get:function(){return this.isInValidItemForm("item_size","required")&&this.isTouchedItemForm("item_size")}},{key:"isInvalidOtherName",get:function(){return(this.isInValidItemForm("other_person_name","required")||this.isInValidItemForm("other_person_name","hasWhiteSpace"))&&this.isTouchedItemForm("other_person_name")}},{key:"isInvalidOtherPhone",get:function(){return(this.isInValidItemForm("other_person_phone","required")||this.isInValidItemForm("other_person_phone","hasWhiteSpace")||this.isInValidItemForm("other_person_phone","invalidPhone"))&&this.isTouchedItemForm("other_person_phone")}}]),e}(),A.\u0275fac=function(e){return new(e||A)(p.Sb(C.c),p.Sb(u.a),p.Sb(h.a),p.Sb(c.e),p.Sb(b.a),p.Sb(m.b))},A.\u0275cmp=p.Mb({type:A,selectors:[["app-drop-item"]],decls:85,vars:26,consts:[[1,"drop_content"],[1,"row"],[1,"col-md-12","mb-4",2,"padding-top","5px"],[1,"card"],[1,"card-body","border-top"],[1,"col-sm-12","col-md-12","col-lg-12"],[1,"text-center"],[1,"col-md-12"],["class","col-md-12 col-lg-12 col-sm-6 overlay",4,"ngIf"],[3,"linear"],["stepper",""],["name","Select shop",3,"editable"],[1,"col-sm-4","mb-1","offset-sm-8"],[3,"formGroup"],[1,"md-form","text-center","mr-0","pr-0"],["id","shop_name","type","text","mdbInput","","mdbValidate","","formControlName","shop_name",1,"form-control"],["for","shop_name"],[4,"ngIf"],[1,"col-md-12","col-sm-12","col-sm-6"],[1,"table-responsive"],[1,"table","table-bordered","table-hover"],["scope","col"],[3,"click",4,"ngFor","ngForOf"],[1,"text-primary","float-right",3,"click"],[1,"float-left","drop_table_pagenation",3,"maxSize","totalItems","ngModel","itemsPerPage","ngModelChange","pageChanged"],["mdbBtn","","size","sm","color","primary",1,"float-right",3,"disabled","click"],["name","Item Details",3,"stepForm"],[1,"col-sm-12","col-md-6","col-lg-6"],[1,"md-form","text-left"],[1,"fa","fa-id-card-alt","blue-text","prefix"],["id","item_name","type","text","mdbInput","","mdbValidate","","formControlName","item_name",1,"form-control","mt-2"],["for","item_name"],[1,"md-form"],["formControlName","item_type",1,"form-control"],["value",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","item_size",1,"form-control"],[1,"col-md-2"],[1,"col-md-3"],["formControlName","other_person_pick",3,"checked","click","change"],["class","row",4,"ngIf"],["mdbBtn","","size","sm","color","primary",3,"disabled","click"],["type","submit","mdbWavesEffect","","mdbBtn","","size","sm","outline","true","color","info","rounded","true",1,"float-right","waves-effect",3,"disabled","click"],[1,"col-md-12","col-lg-12","col-sm-6","overlay"],[1,"spinner-wrapper"],[1,"spinner-submiting"],[1,"spinner"],[3,"click"],[3,"checked","click","change"],[3,"value"],[1,"col-sm-6","col-md-6","col-lg-6"],["id","other_person_name","type","text","mdbInput","","mdbValidate","","formControlName","other_person_name",1,"form-control","mt-2"],["for","other_person_name"],["id","other_person_phone","type","text","mdbInput","","mdbValidate","","formControlName","other_person_phone",1,"form-control","mt-2"],["for","other_person_phone"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(e,t){if(1&e){var o=p.Zb();p.Yb(0,"div",0),p.Yb(1,"div",1),p.Yb(2,"div",2),p.Yb(3,"div",3),p.Yb(4,"div",4),p.Yb(5,"div",1),p.Yb(6,"div",5),p.Yb(7,"h3",6),p.Mc(8,"Drop Item"),p.Xb(),p.Yb(9,"div"),p.Yb(10,"div",1),p.Yb(11,"div",7),p.Kc(12,X,3,0,"div",8),p.Yb(13,"mdb-stepper",9,10),p.Yb(15,"mdb-step",11),p.Kc(16,D,3,0,"div",8),p.Yb(17,"div",12),p.Yb(18,"div"),p.Yb(19,"form",13),p.Yb(20,"div",14),p.Tb(21,"input",15),p.Yb(22,"label",16),p.Mc(23,"Search by shop name"),p.Xb(),p.Kc(24,Y,2,0,"mdb-error",17),p.Xb(),p.Xb(),p.Xb(),p.Xb(),p.Yb(25,"div",18),p.Yb(26,"div",19),p.Yb(27,"table",20),p.Yb(28,"caption"),p.Mc(29,"List of Nearest Open Shops"),p.Xb(),p.Yb(30,"thead"),p.Yb(31,"tr"),p.Yb(32,"th",21),p.Mc(33,"#"),p.Xb(),p.Yb(34,"th",21),p.Mc(35,"Shop"),p.Xb(),p.Yb(36,"th",21),p.Mc(37,"Location"),p.Xb(),p.Yb(38,"th",21),p.Mc(39,"Tel"),p.Xb(),p.Tb(40,"th"),p.Xb(),p.Xb(),p.Yb(41,"tbody"),p.Kc(42,P,12,5,"tr",22),p.Xb(),p.Xb(),p.Yb(43,"a",23),p.gc("click",(function(){return t.changeShop()})),p.Mc(44),p.Xb(),p.Xb(),p.Xb(),p.Yb(45,"pagination",24),p.gc("ngModelChange",(function(e){return t.page.pageNumber=e}))("pageChanged",(function(e){return t.pageChanged(e)})),p.Xb(),p.Yb(46,"button",25),p.gc("click",(function(){p.Ec(o);var e=p.Bc(14);return t.goNext(e)})),p.Mc(47,"Continue"),p.Xb(),p.Xb(),p.Yb(48,"mdb-step",26),p.Yb(49,"form",13),p.Yb(50,"div",1),p.Yb(51,"div",27),p.Yb(52,"div",28),p.Tb(53,"i",29),p.Tb(54,"input",30),p.Yb(55,"label",31),p.Mc(56,"Item Name"),p.Xb(),p.Kc(57,F,2,0,"mdb-error",17),p.Xb(),p.Xb(),p.Yb(58,"div",27),p.Yb(59,"div",32),p.Yb(60,"select",33),p.Yb(61,"option",34),p.Mc(62,"Select Item Type"),p.Xb(),p.Kc(63,L,2,2,"option",35),p.Xb(),p.Kc(64,x,2,0,"mdb-error",17),p.Xb(),p.Xb(),p.Xb(),p.Yb(65,"div",1),p.Yb(66,"div",27),p.Yb(67,"div",32),p.Yb(68,"select",36),p.Yb(69,"option",34),p.Mc(70,"Select Item Size"),p.Xb(),p.Kc(71,N,2,2,"option",35),p.Xb(),p.Kc(72,T,2,0,"mdb-error",17),p.Xb(),p.Xb(),p.Xb(),p.Yb(73,"div",1),p.Yb(74,"div",37),p.Yb(75,"label"),p.Mc(76,"Other to pick"),p.Xb(),p.Xb(),p.Yb(77,"div",38),p.Yb(78,"mdb-checkbox",39),p.gc("click",(function(e){return e.stopPropagation()}))("change",(function(e){return t.checkboxToPick(e)})),p.Xb(),p.Xb(),p.Xb(),p.Kc(79,R,13,2,"div",40),p.Yb(80,"button",41),p.gc("click",(function(){return p.Ec(o),p.Bc(14).previous()})),p.Mc(81,"Back"),p.Xb(),p.Yb(82,"button",42),p.gc("click",(function(){return t.dropItemNow()})),p.Kc(83,V,2,0,"span",17),p.Kc(84,z,3,0,"span",17),p.Xb(),p.Xb(),p.Xb(),p.Xb(),p.Xb(),p.Xb(),p.Xb(),p.Xb(),p.Xb(),p.Xb(),p.Xb(),p.Xb(),p.Xb(),p.Xb()}2&e&&(p.Db(12),p.qc("ngIf",t.submitting),p.Db(1),p.qc("linear",!0),p.Db(2),p.qc("editable",!t.submitting),p.Db(1),p.qc("ngIf",t.loading),p.Db(3),p.qc("formGroup",t.searchForm),p.Db(5),p.qc("ngIf",t.isInvalidShopName),p.Db(18),p.qc("ngForOf",t.nearestShops),p.Db(2),p.Nc(t.search_shop_label),p.Db(1),p.qc("maxSize",t.MAX_SIZE)("totalItems",t.page.totalElements)("ngModel",t.page.pageNumber)("itemsPerPage",t.page.size),p.Db(1),p.qc("disabled",!t.shopSelected),p.Db(2),p.qc("stepForm",t.itemInfoForm),p.Db(1),p.qc("formGroup",t.itemInfoForm),p.Db(8),p.qc("ngIf",t.isInvalidItemName),p.Db(6),p.qc("ngForOf",t.itemTypes),p.Db(1),p.qc("ngIf",t.isInvalidItemType),p.Db(7),p.qc("ngForOf",t.itemSizes),p.Db(1),p.qc("ngIf",t.isInvalidItemSize),p.Db(6),p.qc("checked",!1),p.Db(1),p.qc("ngIf",t.otherToPick),p.Db(1),p.qc("disabled",t.submitting),p.Db(2),p.qc("disabled",!t.itemInfoForm.valid||t.submitting||!t.shopSelected),p.Db(1),p.qc("ngIf",!t.submitting),p.Db(1),p.qc("ngIf",t.submitting))},directives:[s.j,a.E,a.D,C.u,C.l,C.f,C.b,a.C,a.G,C.k,C.e,s.i,O.a,C.m,a.w,C.r,C.n,C.t,a.i,a.M,a.A],styles:[".card-body[_ngcontent-%COMP%]{padding-left:0;padding-right:0}@media only screen and (max-width:600px){.drop_item[_ngcontent-%COMP%]{padding:unset;padding-top:4rem}.card-body[_ngcontent-%COMP%]{padding-left:0;padding-right:0}}"]}),A)},{path:"list",component:l.a},{path:"near-shops",component:I}],B=((W=function e(){_classCallCheck(this,e)}).\u0275mod=p.Qb({type:W}),W.\u0275inj=p.Pb({factory:function(e){return new(e||W)},imports:[[c.i.forChild(K)],c.i]}),W);o("8LU1"),o("cH1L"),o("nLfN"),o("XNiG"),o("2Vo4"),o("7+OI"),o("LRne"),o("1G5W");var U,G=((U=function e(){_classCallCheck(this,e)}).\u0275mod=p.Qb({type:U}),U.\u0275inj=p.Pb({factory:function(e){return new(e||U)}}),U),H=o("FKr1");o("quSY"),o("VRyK"),o("itXk"),o("lJxs");var Z,j=((Z=function e(){_classCallCheck(this,e)}).\u0275mod=p.Qb({type:Z}),Z.\u0275inj=p.Pb({factory:function(e){return new(e||Z)},imports:[[G,H.a],H.a]}),Z);o("R1ws");var Q=o("GU7r");o("u47x");var $,J,ee,te=((J=function e(){_classCallCheck(this,e)}).\u0275mod=p.Qb({type:J}),J.\u0275inj=p.Pb({factory:function(e){return new(e||J)}}),J),oe=(($=function e(){_classCallCheck(this,e)}).\u0275mod=p.Qb({type:$}),$.\u0275inj=p.Pb({factory:function(e){return new(e||$)},imports:[[H.c,H.a,Q.c,te],H.a,te]}),$),ie=o("AytR"),ne=((ee=function e(){_classCallCheck(this,e)}).\u0275mod=p.Qb({type:ee}),ee.\u0275inj=p.Pb({factory:function(e){return new(e||ee)},imports:[[s.b,B,C.g,C.q,a.r.forRoot(),a.J,a.N,a.f,a.K,a.a,a.g,a.b,a.o,a.n,a.l,a.j,d.a.forRoot({apiKey:ie.a.google_map_api_key,libraries:["places"]}),f,a.j,j,oe,O.b,a.k]]}),ee)}}]);