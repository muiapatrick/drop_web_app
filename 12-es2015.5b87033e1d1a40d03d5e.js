(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{Y3tR:function(t,e,i){"use strict";i.r(e),i.d(e,"DropModule",(function(){return G}));var o=i("ofXK"),n=i("ZZCA"),s=i("tyNb"),r=i("pSwl"),a=i("fXoL"),c=i("pxUr"),h=i("GBiA"),l=i("5eHb"),p=i("BCCV"),d=i("P6yk");let m=(()=>{let t=class{constructor(t){this.gmapsApi=t,this.travelMode="DRIVING",this.transitOptions=void 0,this.drivingOptions=void 0,this.waypoints=[],this.optimizeWaypoints=!0,this.provideRouteAlternatives=!1,this.avoidHighways=!1,this.avoidTolls=!1,this.visible=!0,this.onChange=new a.o,this.onResponse=new a.o,this.sendInfoWindow=new a.o,this.status=new a.o,this.originDrag=new a.o,this.destinationDrag=new a.o,this.directionsService=void 0,this.directionsDisplay=void 0,this.waypointsMarker=[],this.isFirstChange=!0}ngOnInit(){!0===this.visible&&this.directionDraw()}ngOnChanges(t){if(this.visible){if(this.isFirstChange)return void 0===this.directionsDisplay&&this.directionDraw(),void(this.isFirstChange=!1);void 0!==t.renderOptions&&!1===t.renderOptions.firstChange&&(this.removeMarkers(),this.removeDirections()),this.directionDraw()}else try{this.removeMarkers(),this.removeDirections()}catch(e){}}ngOnDestroy(){this.destroyMarkers(),this.removeDirections()}directionDraw(){this.gmapsApi.getNativeMap().then(t=>{void 0===this.directionsDisplay&&(this.directionsDisplay=new google.maps.DirectionsRenderer(this.renderOptions),this.directionsDisplay.setMap(t),this.directionsDisplay.addListener("directions_changed",()=>{this.onChange.emit(this.directionsDisplay.getDirections())})),void 0===this.directionsService&&(this.directionsService=new google.maps.DirectionsService),this.directionsDisplay.setPanel(void 0===this.panel?null:this.panel),"object"==typeof this.renderRoute&&null!==this.renderRoute?(this.directionsDisplay.setDirections(this.renderRoute),this.renderRoute=null):this.directionsService.route({origin:this.origin,destination:this.destination,travelMode:this.travelMode,transitOptions:this.transitOptions,drivingOptions:this.drivingOptions,waypoints:this.waypoints,optimizeWaypoints:this.optimizeWaypoints,provideRouteAlternatives:this.provideRouteAlternatives,avoidHighways:this.avoidHighways,avoidTolls:this.avoidTolls},(e,i)=>{switch(this.onResponse.emit(e),this.status.emit(i),i){case"OK":if(this.directionsDisplay.setDirections(e),void 0!==this.markerOptions){this.destroyMarkers();const i=e.routes[0].legs[0];try{void 0!==this.markerOptions.origin&&(this.markerOptions.origin.map=t,this.markerOptions.origin.position=i.start_location,this.originMarker=this.setMarker(t,this.originMarker,this.markerOptions.origin,i.start_address),this.markerOptions.origin.draggable&&this.originMarker.addListener("dragend",()=>{this.origin=this.originMarker.position,this.directionDraw(),this.originDrag.emit(this.origin)})),void 0!==this.markerOptions.destination&&(this.markerOptions.destination.map=t,this.markerOptions.destination.position=i.end_location,this.destinationMarker=this.setMarker(t,this.destinationMarker,this.markerOptions.destination,i.end_address),this.markerOptions.destination.draggable&&this.destinationMarker.addListener("dragend",()=>{this.destination=this.destinationMarker.position,this.directionDraw(),this.destinationDrag.emit(this.destination)})),void 0!==this.markerOptions.waypoints&&this.waypoints.forEach((e,o)=>{Array.isArray(this.markerOptions.waypoints)?(this.markerOptions.waypoints[o].map=t,this.markerOptions.waypoints[o].position=i.via_waypoints[o],this.waypointsMarker.push(this.setMarker(t,e,this.markerOptions.waypoints[o],i.via_waypoints[o]))):(this.markerOptions.waypoints.map=t,this.markerOptions.waypoints.position=i.via_waypoints[o],this.waypointsMarker.push(this.setMarker(t,e,this.markerOptions.waypoints,i.via_waypoints[o])))})}catch(o){console.error("MarkerOptions error.",o)}}}})})}setMarker(t,e,i,o){return void 0===this.infoWindow&&(this.infoWindow=new google.maps.InfoWindow({}),this.sendInfoWindow.emit(this.infoWindow)),(e=new google.maps.Marker(i)).clickable&&e.addListener("click",()=>{this.infoWindow.setContent(void 0===i.infoWindow?o:i.infoWindow),this.infoWindow.open(t,e)}),e}removeMarkers(){void 0!==this.originMarker&&this.originMarker.setMap(null),void 0!==this.destinationMarker&&this.destinationMarker.setMap(null),this.waypointsMarker.forEach(t=>{void 0!==t&&t.setMap(null)})}removeDirections(){void 0!==this.directionsDisplay&&(this.directionsDisplay.setPanel(null),this.directionsDisplay.setMap(null),this.directionsDisplay=void 0)}destroyMarkers(){try{void 0!==this.originMarker&&(google.maps.event.clearListeners(this.originMarker,"click"),this.markerOptions.origin.draggable&&google.maps.event.clearListeners(this.originMarker,"dragend")),void 0!==this.destinationMarker&&(google.maps.event.clearListeners(this.destinationMarker,"click"),this.markerOptions.origin.draggable&&google.maps.event.clearListeners(this.destinationMarker,"dragend")),this.waypointsMarker.forEach(t=>{void 0!==t&&google.maps.event.clearListeners(t,"click")}),this.removeMarkers()}catch(t){console.error("Can not reset custom marker.",t)}}};return t.\u0275fac=function(e){return new(e||t)(a.Sb(c.e))},t.\u0275dir=a.Nb({type:t,selectors:[["agm-direction"]],inputs:{travelMode:"travelMode",transitOptions:"transitOptions",drivingOptions:"drivingOptions",waypoints:"waypoints",optimizeWaypoints:"optimizeWaypoints",provideRouteAlternatives:"provideRouteAlternatives",avoidHighways:"avoidHighways",avoidTolls:"avoidTolls",visible:"visible",renderRoute:"renderRoute",origin:"origin",destination:"destination",infoWindow:"infoWindow",renderOptions:"renderOptions",panel:"panel",markerOptions:"markerOptions"},outputs:{onChange:"onChange",onResponse:"onResponse",sendInfoWindow:"sendInfoWindow",status:"status",originDrag:"originDrag",destinationDrag:"destinationDrag"},features:[a.Bb]}),t})();var b;let g=(()=>{let t=b=class{static forRoot(){return{ngModule:b}}static forChild(){return{ngModule:b}}};return t.\u0275mod=a.Qb({type:t}),t.\u0275inj=a.Pb({factory:function(e){return new(e||t)}}),t})();const u=["search"];function _(t,e){if(1&t){const t=a.Zb();a.Yb(0,"agm-marker",15),a.gc("markerClick",(function(){a.Dc(t);const i=e.$implicit,o=e.index;return a.kc().clickedMarker(i.label,o)}))("dragEnd",(function(i){a.Dc(t);const o=e.$implicit;return a.kc().markerDragEnd(o,i)})),a.Yb(1,"agm-info-window"),a.Yb(2,"strong"),a.Lc(3),a.Xb(),a.Xb(),a.Xb()}if(2&t){const t=e.$implicit;a.pc("markerClickable",t.clickable)("latitude",t.lat)("longitude",t.lng)("label",t.label)("markerDraggable",t.draggable)("iconUrl",t.icon)("animation",t.animation),a.Db(3),a.Mc(t.title)}}function f(t,e){if(1&t&&a.Tb(0,"agm-direction",16),2&t){const t=a.kc();a.pc("origin",t.origin)("destination",t.destination)}}let v=(()=>{class t{constructor(t,e,i,o,n,s,r){this._mapsAPILoader=t,this._ngZone=e,this._openShopsService=i,this._toastr=o,this._router=n,this._shopService=s,this._dropService=r,this.zoom=15,this.markers=[],this.openShops=[],this._openShopsService.shopsCountChange.subscribe(t=>{this.selectedShopId=null,this.openShops=t,this.removeMarkers(),this.markers.push({lat:this.currentLat,lng:this.currentLong,draggable:!0,clickable:!1,label:"Drag the Red marker to Place you want to See shops around.",animation:"BOUNCE",title:"My Position"}),this.openShops.forEach(t=>{this.markers.push({lat:t.position.geopoint.latitude,lng:t.position.geopoint.longitude,draggable:!1,clickable:!0,icon:"http://maps.google.com/mapfiles/ms/icons/green-dot.png",title:t.shop_name,shop_id:t.id})})})}ngOnInit(){console.log("FROM DROP ITEM"),this._dropService.selectedShopLoc.subscribe(t=>{this.selectedLocation=t,console.log(t)}),this._dropService.currentItemAction.subscribe(t=>{this.item_action=t,console.log(t)}),this._mapsAPILoader.load().then(()=>{this.setCurrentLocation();let t=new google.maps.places.Autocomplete(this.searchElementRef.nativeElement);t.addListener("place_changed",()=>{this._ngZone.run(()=>{this.show_path=!1,this.selectedShopId=null;let e=t.getPlace();null!=e.geometry&&(console.log("Place LAT : "+e.geometry.location.lat()),console.log("Place LONG : "+e.geometry.location.lng()),this.currentLat=e.geometry.location.lat(),this.currentLong=e.geometry.location.lng(),this._openShopsService.changeCurrentPosition(this.currentLat,this.currentLong))})})})}setCurrentLocation(){"geolocation"in navigator?"edit"==this.item_action&&null!=this.selectedLocation?(this.currentLat=this.selectedLocation.lat,this.currentLong=this.selectedLocation.long,this.markers.push({lat:this.currentLat,lng:this.currentLong,draggable:!0,clickable:!1,label:"Drag the Red marker to Place you want to See shops around.",animation:"BOUNCE",title:this.selectedLocation.shop_name}),this._openShopsService.changeCurrentPosition(this.currentLat,this.currentLong)):navigator.geolocation.getCurrentPosition(t=>{this.currentLat=t.coords.latitude,this.currentLong=t.coords.longitude,this.markers.push({lat:this.currentLat,lng:this.currentLong,draggable:!0,clickable:!1,label:"Drag the Red marker to Place you want to See shops around.",animation:"BOUNCE",title:"My Position"}),this._openShopsService.changeCurrentPosition(this.currentLat,this.currentLong)},t=>{this._toastr.error("Unable to access your current location")}):alert("Geolocation not supported!!")}mapReady(t){this.map=t,this.map.controls[google.maps.ControlPosition.RIGHT_TOP].push(document.getElementById("btn-drop-control")),this.map.controls[google.maps.ControlPosition.RIGHT_TOP].push(document.getElementById("btn-pick-control")),this.map.controls[google.maps.ControlPosition.RIGHT_TOP].push(document.getElementById("btn-hover-control"))}removeMarkers(){this.markers.splice(0,this.markers.length)}markerDragEnd(t,e){this.currentLat=e.coords.lat,this.currentLong=e.coords.lng,this._openShopsService.changeCurrentPosition(this.currentLat,this.currentLong)}clickedMarker(t,e){let i=this.markers[e];i.clickable&&(this.show_path=!0,this.origin={lat:this.currentLat,lng:this.currentLong},this.destination={lat:i.lat,lng:i.lng},this.selectedShopId=i.shop_id)}dropItem(){void 0===this.openShops||this.openShops.length<=0?this._toastr.error("The are not shops around you.","No Open Shops"):(this._openShopsService.setSelectedShop(this.selectedShopId),this._shopService.changeShopId(this.selectedShopId),this._shopService.changeOpenShops(this.openShops),this._router.navigate(["drop/item"]))}pickItem(){console.log("Pick Item")}}return t.\u0275fac=function(e){return new(e||t)(a.Sb(c.f),a.Sb(a.A),a.Sb(h.a),a.Sb(l.b),a.Sb(s.e),a.Sb(p.a),a.Sb(d.a))},t.\u0275cmp=a.Mb({type:t,selectors:[["app-drop"]],viewQuery:function(t,e){var i;1&t&&a.Rc(u,!0),2&t&&a.zc(i=a.hc())&&(e.searchElementRef=i.first)},decls:15,vars:10,consts:[[1,"drop_map"],[1,"row"],[1,"col-md-12","mb-4",2,"padding-top","5px"],["id","map"],[3,"latitude","longitude","zoom","minZoom","maxZoom","fullscreenControl","fullscreenControlOptions","streetViewControl","mapReady"],["id","btn-drop-control",1,"btn","btn-outline-danger","btn-sm","waves-effect","controls","btn-control",3,"click"],["aria-hidden","true",1,"fa","fa-tint"],["id","btn-pick-control",1,"btn","btn-outline-info","btn-sm","waves-effect","btn-control",3,"click"],[1,"fas","fa-hand-holding"],[3,"markerClickable","latitude","longitude","label","markerDraggable","iconUrl","animation","markerClick","dragEnd",4,"ngFor","ngForOf"],[3,"origin","destination",4,"ngIf"],[1,"tools","w-50","d-flex"],[1,"form-group","w-75","flex-center"],["type","text","placeholder","Search nearest shop by location, or building or road","autocorrect","off","autocapitalize","off","spellcheck","off",1,"form-control",3,"key.enter"],["search",""],[3,"markerClickable","latitude","longitude","label","markerDraggable","iconUrl","animation","markerClick","dragEnd"],[3,"origin","destination"]],template:function(t,e){1&t&&(a.Yb(0,"div",0),a.Yb(1,"div",1),a.Yb(2,"div",2),a.Yb(3,"div",3),a.Yb(4,"agm-map",4),a.gc("mapReady",(function(t){return e.mapReady(t)})),a.Yb(5,"button",5),a.gc("click",(function(){return e.dropItem()})),a.Tb(6,"i",6),a.Xb(),a.Yb(7,"button",7),a.gc("click",(function(){return e.pickItem()})),a.Tb(8,"i",8),a.Xb(),a.Jc(9,_,4,8,"agm-marker",9),a.Jc(10,f,1,2,"agm-direction",10),a.Xb(),a.Yb(11,"div",11),a.Yb(12,"div",12),a.Yb(13,"input",13,14),a.gc("key.enter",(function(t){return t.preventDefault()})),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Xb()),2&t&&(a.Db(4),a.pc("latitude",e.currentLat)("longitude",e.currentLong)("zoom",e.zoom)("minZoom",7)("maxZoom",20)("fullscreenControl",!0)("fullscreenControlOptions",e.screenOptions)("streetViewControl",!1),a.Db(5),a.pc("ngForOf",e.markers),a.Db(1),a.pc("ngIf",e.show_path))},directives:[c.c,o.i,o.j,c.d,c.b,m],styles:['#map[_ngcontent-%COMP%]{height:100vh;width:100%;padding-bottom:55.25%}.drop_map[_ngcontent-%COMP%]{padding-left:0!important;padding-right:9.5px!important}.tools[_ngcontent-%COMP%]{position:fixed;top:13%;right:20%;cursor:pointer}.tools_actions[_ngcontent-%COMP%]{z-index:9999;position:fixed;top:20%;left:95.5%;right:20px}agm-map[_ngcontent-%COMP%]{height:100vh}.btn-control[_ngcontent-%COMP%]{background:#fff none repeat scroll 0 0;margin:10px;padding:0;position:absolute;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border-radius:2px;height:40px;width:40px;box-shadow:0 1px 4px -1px rgba(0,0,0,.3);overflow:hidden;top:36px;right:0}.btn-control[_ngcontent-%COMP%]:hover{transition:.5s;width:60px}.btn-control[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{display:inline-block;position:relative;transition:.5s}.btn-control[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:after{position:absolute;opacity:0;top:0;transition:.5s}.btn-control[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{padding-right:40px}.btn-control[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]:after{opacity:1;right:0}#btn-drop-control[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:after{content:"Drop"}#btn-drop-control[_ngcontent-%COMP%]:hover{background:#c00d1c}#btn-pick-control[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:after{content:"Pick"}#btn-pick-control[_ngcontent-%COMP%]:hover{background:#0f7254}']}),t})();var k=i("0EQZ"),I=i("0Tvr"),S=i("3Pt+"),y=i("lSn3"),w=i("Lm2G");function O(t,e){1&t&&(a.Yb(0,"div",43),a.Yb(1,"div",44),a.Tb(2,"div",45),a.Xb(),a.Xb())}function D(t,e){1&t&&(a.Yb(0,"div",43),a.Yb(1,"div",44),a.Tb(2,"div",46),a.Xb(),a.Xb())}function M(t,e){1&t&&(a.Yb(0,"mdb-error"),a.Lc(1,"Enter shop name to search"),a.Xb())}function X(t,e){if(1&t){const t=a.Zb();a.Yb(0,"tr",47),a.gc("click",(function(){a.Dc(t);const i=e.$implicit;return a.kc().checkboxLabel(i)})),a.Yb(1,"td"),a.Lc(2),a.Xb(),a.Yb(3,"td"),a.Yb(4,"strong"),a.Lc(5),a.Xb(),a.Xb(),a.Yb(6,"td"),a.Lc(7),a.Xb(),a.Yb(8,"td"),a.Lc(9),a.Xb(),a.Yb(10,"td"),a.Yb(11,"mdb-checkbox",48),a.gc("click",(function(e){return a.Dc(t),e.stopPropagation()}))("change",(function(){a.Dc(t);const i=e.$implicit;return a.kc().checkboxLabel(i)})),a.Xb(),a.Xb(),a.Xb()}if(2&t){const t=e.$implicit,i=e.index,o=a.kc();a.Db(2),a.Nc("",o.shopNumber(i),"."),a.Db(3),a.Mc(null==t?null:t.shop_name),a.Db(2),a.Mc(null==t?null:t.shop_location),a.Db(2),a.Mc(null==t?null:t.phone_number),a.Db(2),a.pc("checked",o.selection.isSelected(t))}}function L(t,e){1&t&&(a.Yb(0,"mdb-error"),a.Lc(1,"Item Name Required"),a.Xb())}function Y(t,e){if(1&t&&(a.Yb(0,"option",49),a.Lc(1),a.Xb()),2&t){const t=e.$implicit;a.qc("value",t),a.Db(1),a.Mc(t)}}function C(t,e){1&t&&(a.Yb(0,"mdb-error"),a.Lc(1,"Item Type Required"),a.Xb())}function P(t,e){if(1&t&&(a.Yb(0,"option",49),a.Lc(1),a.Xb()),2&t){const t=e.$implicit;a.qc("value",t),a.Db(1),a.Mc(t)}}function F(t,e){1&t&&(a.Yb(0,"mdb-error"),a.Lc(1,"Item Size Required"),a.Xb())}function x(t,e){1&t&&(a.Yb(0,"mdb-error"),a.Lc(1,"Name of Person to pick is required"),a.Xb())}function T(t,e){1&t&&(a.Yb(0,"mdb-error"),a.Lc(1,"Valid Phone Number of Person to pick is required"),a.Xb())}function N(t,e){if(1&t&&(a.Yb(0,"div",1),a.Yb(1,"div",50),a.Yb(2,"div",28),a.Tb(3,"input",51),a.Yb(4,"label",52),a.Lc(5,"Other Person Name"),a.Xb(),a.Jc(6,x,2,0,"mdb-error",17),a.Xb(),a.Xb(),a.Yb(7,"div",50),a.Yb(8,"div",28),a.Tb(9,"input",53),a.Yb(10,"label",54),a.Lc(11,"Other Person Phone"),a.Xb(),a.Jc(12,T,2,0,"mdb-error",17),a.Xb(),a.Xb(),a.Xb()),2&t){const t=a.kc();a.Db(6),a.pc("ngIf",t.otherToPick&&t.isInvalidOtherName),a.Db(6),a.pc("ngIf",t.otherToPick&&t.isInvalidOtherPhone)}}function E(t,e){1&t&&(a.Yb(0,"span"),a.Lc(1,"Drop Now"),a.Xb())}function R(t,e){1&t&&(a.Yb(0,"span"),a.Tb(1,"i",55),a.Lc(2," Dropping... "),a.Xb())}const V=[{path:"",component:(()=>{class t{constructor(t,e,i,o,n,s){this._formBuilder=t,this._shopService=e,this._openShopService=i,this._router=o,this._dropService=n,this._toastr=s,this.page=new I.a,this.MAX_SIZE=3,this.selection=new k.c(!1,[]),this.nearestShops=[],this.openShops=[],this.openShopsIds="",this.itemTypes=["Envelope","Electronic","Computer","Other"],this.itemSizes=["Larger Eg Large Box","Medium E.g Medium Sized box","Small Eg. Envelopes"],this.search_shop_label="Search Shop by location",this.item=null}ngOnInit(){this.otherToPick=!1,this.itemInfoForm=this._formBuilder.group({item_name:["",S.s.compose([S.s.required,y.b])],item_type:["",S.s.compose([S.s.required])],item_size:["",S.s.compose([S.s.required])],other_info:"",other_person_name:"",other_person_phone:"",other_person_pick:""}),this.searchForm=this._formBuilder.group({shop_name:["",S.s.compose([S.s.required])]}),this.searchForm.get("shop_name").valueChanges.pipe().subscribe(t=>{this.page.pageNumber=0,this.page_changed=!1,this.searchForm.valid?(this.loading=!0,this.nearestShops=[],this.searchName=t,this.getShops()):(this.searchName="",this.getShops())}),this.search=!1,this.searchName="",this.page.pageNumber=0,this._shopService.shopId.subscribe(t=>{this.shopId=t}),this._dropService.currentItemAction.subscribe(t=>{this.item_action=null==t||null==t?null:t}),this._dropService.currentItemData.subscribe(t=>{console.log("ITEM TO EDIT"),console.log(t),this.item=t}),this._shopService.nearOpenShop.subscribe(t=>{if(this.openShops=t,null==this.openShops||this.openShops.length<=0)if(null==this.item_action)this._router.navigate(["/drop/item/near-shops"]);else{let t={id:this.item.shop.id.toString(),shop_name:this.item.shop.shop_name,shop_location:this.item.shop.shop_location,phone_number:this.item.shop.phone_number,latitude:this.item.shop.latitude,longitude:this.item.shop.longitude,is_open:this.item.shop.is_open};this.nearestShops.push(t),this.checkboxLabel(t)}else this.openShops.forEach(t=>{this.openShopsIds+=t.id+","}),this.getShops();"edit"==this.item_action&&null!=this.item&&(this.search_shop_label="Change Shop",this.itemInfoForm.get("item_name").setValue(this.item.item_name),this.itemInfoForm.get("item_type").setValue(this.item.item_type),this.itemInfoForm.get("item_size").setValue(this.item.item_size),this.itemInfoForm.get("other_info").setValue(this.item.item_description),this.itemInfoForm.get("other_person_pick").setValue(this.item.is_other_pick),this.checkboxToPick({checked:this.item.is_other_pick}),this.itemInfoForm.get("other_person_name").setValue(this.item.other_person_name),this.itemInfoForm.get("other_person_phone").setValue(this.item.other_person_phone))})}isTouched(t){return this.searchForm.controls[t].touched}isInValid(t,e){return this.searchForm.controls[t].hasError(e)}isInValidItemFormisInValid(t,e){return this.searchForm.controls[t].hasError(e)}get isInvalidShopName(){return this.isInValid("shop_name","required")&&this.isTouched("shop_name")}isTouchedItemForm(t){return this.itemInfoForm.controls[t].touched}isInValidItemForm(t,e){return this.itemInfoForm.controls[t].hasError(e)}get isInvalidItemName(){return(this.isInValidItemForm("item_name","required")||this.isInValidItemForm("item_name","hasWhiteSpace"))&&this.isTouchedItemForm("item_name")}get isInvalidItemType(){return this.isInValidItemForm("item_type","required")&&this.isTouchedItemForm("item_type")}get isInvalidItemSize(){return this.isInValidItemForm("item_size","required")&&this.isTouchedItemForm("item_size")}get isInvalidOtherName(){return(this.isInValidItemForm("other_person_name","required")||this.isInValidItemForm("other_person_name","hasWhiteSpace"))&&this.isTouchedItemForm("other_person_name")}get isInvalidOtherPhone(){return(this.isInValidItemForm("other_person_phone","required")||this.isInValidItemForm("other_person_phone","hasWhiteSpace")||this.isInValidItemForm("other_person_phone","invalidPhone"))&&this.isTouchedItemForm("other_person_phone")}goNext(t){t.next()}getShops(){this.shopSelected=!1,this.loading=!0,this.nearestShops=[],this._shopService.getShops(this.page.pageNumber.toString(),this.page.size.toString(),null,this.openShopsIds,this.searchName).subscribe(t=>{console.log(t),this.page.totalElements=t.meta.total_elements,this.page.totalPages=this.search?this.page.totalPages:t.meta.total_elements>0?Math.ceil(t.meta.total_elements/this.page.size):0,this.nearestShops=t.data,this.loading=!1,null!=this.shopId&&null!=this.shopId&&(console.log("SHOP ID SEL : "+this.shopId),this.nearestShops.forEach(t=>{t.id==this.shopId&&this.checkboxLabel(t)}))},t=>{this.loading=!1})}shopNumber(t){return this.page_changed?(this.page.pageNumber-1)*this.page.size+t+1:t+1}pageChanged(t){this.page.pageNumber=t.page,this.page_changed=!0,this.getShops()}checkboxLabel(t){return this.shopId="",this.selection.toggle(t),console.log(t),console.log(this.selection.selected),this.shopSelected=0!=this.selection.selected.length,`${this.selection.isSelected(t)?"deselect":"select"} shop ${t.position+1}`}checkboxToPick(t){console.log("CHECK CHECKBOX"),console.log(t),this.otherToPick=t.checked,this.otherToPick?(this.itemInfoForm.controls.other_person_name.setValidators([S.s.compose([S.s.required,y.b])]),this.itemInfoForm.controls.other_person_phone.setValidators([S.s.compose([S.s.required,y.b,y.d])])):(this.itemInfoForm.controls.other_person_name.reset(),this.itemInfoForm.controls.other_person_phone.reset(),this.itemInfoForm.controls.other_person_name.markAsUntouched(),this.itemInfoForm.controls.other_person_phone.markAsUntouched(),this.itemInfoForm.controls.other_person_name.clearValidators(),this.itemInfoForm.controls.other_person_phone.clearValidators()),this.itemInfoForm.controls.other_person_name.updateValueAndValidity(),this.itemInfoForm.controls.other_person_phone.updateValueAndValidity()}dropItemNow(){console.log("DROP NOW!"),console.log("SHOP SELECTED ? : "+this.shopSelected),this.submitting=!0;const t={item_name:this.itemInfoForm.controls.item_name.value,item_description:this.itemInfoForm.controls.other_info.value,item_type:this.itemInfoForm.controls.item_type.value,item_size:this.itemInfoForm.controls.item_size.value,other_person_name:this.itemInfoForm.controls.other_person_name.value,other_person_phone:this.itemInfoForm.controls.other_person_phone.value,shop_id:this.selection.selected[0].id,other_pick:this.otherToPick};"edit"==this.item_action?this._dropService.updateItem(this.item.id.toString(),t).subscribe(t=>{this._toastr.success("Item Updated successfuly.","SUCCESSFULL DROP"),this.submitting=!1,this._router.navigate(["/drop/item/list"])},t=>{400==t.status&&this._toastr.error("Invalid Request Parameters not permitted"),409==t.status&&this._toastr.error(t.error.api_code_description),console.log(t),this.submitting=!1}):this._dropService.dropItem(t).subscribe(t=>{this._toastr.success("Item Dropped successfuly.","SUCCESSFULL DROP"),this.submitting=!1,this._router.navigate(["/drop/item/list"])},t=>{400==t.status&&this._toastr.error("Invalid Request Parameters not permitted"),409==t.status&&this._toastr.error(t.error.api_code_description),console.log(t),this.submitting=!1})}changeShop(){"edit"==this.item_action?(this._dropService.setShopLocation({lat:this.item.shop.latitude,long:this.item.shop.longitude,shop_name:this.item.shop.shop_name}),this._router.navigate(["/drop/item/near-shops"])):this._router.navigate(["/drop/item/near-shops"])}}return t.\u0275fac=function(e){return new(e||t)(a.Sb(S.c),a.Sb(p.a),a.Sb(h.a),a.Sb(s.e),a.Sb(d.a),a.Sb(l.b))},t.\u0275cmp=a.Mb({type:t,selectors:[["app-drop-item"]],decls:85,vars:26,consts:[[1,"drop_content"],[1,"row"],[1,"col-md-12","mb-4",2,"padding-top","5px"],[1,"card"],[1,"card-body","border-top"],[1,"col-sm-12","col-md-12","col-lg-12"],[1,"text-center"],[1,"col-md-12"],["class","col-md-12 col-lg-12 col-sm-6 overlay",4,"ngIf"],[3,"linear"],["stepper",""],["name","Select shop",3,"editable"],[1,"col-sm-4","mb-1","offset-sm-8"],[3,"formGroup"],[1,"md-form","text-center","mr-0","pr-0"],["id","shop_name","type","text","mdbInput","","mdbValidate","","formControlName","shop_name",1,"form-control"],["for","shop_name"],[4,"ngIf"],[1,"col-md-12","col-sm-12","col-sm-6"],[1,"table-responsive"],[1,"table","table-bordered","table-hover"],["scope","col"],[3,"click",4,"ngFor","ngForOf"],[1,"text-primary","float-right",3,"click"],[1,"float-left","drop_table_pagenation",3,"maxSize","totalItems","ngModel","itemsPerPage","ngModelChange","pageChanged"],["mdbBtn","","size","sm","color","primary",1,"float-right",3,"disabled","click"],["name","Item Details",3,"stepForm"],[1,"col-sm-12","col-md-6","col-lg-6"],[1,"md-form","text-left"],[1,"fa","fa-id-card-alt","blue-text","prefix"],["id","item_name","type","text","mdbInput","","mdbValidate","","formControlName","item_name",1,"form-control","mt-2"],["for","item_name"],[1,"md-form"],["formControlName","item_type",1,"form-control"],["value",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","item_size",1,"form-control"],[1,"col-md-2"],[1,"col-md-3"],["formControlName","other_person_pick",3,"checked","click","change"],["class","row",4,"ngIf"],["mdbBtn","","size","sm","color","primary",3,"disabled","click"],["type","submit","mdbWavesEffect","","mdbBtn","","size","sm","outline","true","color","info","rounded","true",1,"float-right","waves-effect",3,"disabled","click"],[1,"col-md-12","col-lg-12","col-sm-6","overlay"],[1,"spinner-wrapper"],[1,"spinner-submiting"],[1,"spinner"],[3,"click"],[3,"checked","click","change"],[3,"value"],[1,"col-sm-6","col-md-6","col-lg-6"],["id","other_person_name","type","text","mdbInput","","mdbValidate","","formControlName","other_person_name",1,"form-control","mt-2"],["for","other_person_name"],["id","other_person_phone","type","text","mdbInput","","mdbValidate","","formControlName","other_person_phone",1,"form-control","mt-2"],["for","other_person_phone"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(t,e){if(1&t){const t=a.Zb();a.Yb(0,"div",0),a.Yb(1,"div",1),a.Yb(2,"div",2),a.Yb(3,"div",3),a.Yb(4,"div",4),a.Yb(5,"div",1),a.Yb(6,"div",5),a.Yb(7,"h3",6),a.Lc(8,"Drop Item"),a.Xb(),a.Yb(9,"div"),a.Yb(10,"div",1),a.Yb(11,"div",7),a.Jc(12,O,3,0,"div",8),a.Yb(13,"mdb-stepper",9,10),a.Yb(15,"mdb-step",11),a.Jc(16,D,3,0,"div",8),a.Yb(17,"div",12),a.Yb(18,"div"),a.Yb(19,"form",13),a.Yb(20,"div",14),a.Tb(21,"input",15),a.Yb(22,"label",16),a.Lc(23,"Search by shop name"),a.Xb(),a.Jc(24,M,2,0,"mdb-error",17),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Yb(25,"div",18),a.Yb(26,"div",19),a.Yb(27,"table",20),a.Yb(28,"caption"),a.Lc(29,"List of Nearest Open Shops"),a.Xb(),a.Yb(30,"thead"),a.Yb(31,"tr"),a.Yb(32,"th",21),a.Lc(33,"#"),a.Xb(),a.Yb(34,"th",21),a.Lc(35,"Shop"),a.Xb(),a.Yb(36,"th",21),a.Lc(37,"Location"),a.Xb(),a.Yb(38,"th",21),a.Lc(39,"Tel"),a.Xb(),a.Tb(40,"th"),a.Xb(),a.Xb(),a.Yb(41,"tbody"),a.Jc(42,X,12,5,"tr",22),a.Xb(),a.Xb(),a.Yb(43,"a",23),a.gc("click",(function(){return e.changeShop()})),a.Lc(44),a.Xb(),a.Xb(),a.Xb(),a.Yb(45,"pagination",24),a.gc("ngModelChange",(function(t){return e.page.pageNumber=t}))("pageChanged",(function(t){return e.pageChanged(t)})),a.Xb(),a.Yb(46,"button",25),a.gc("click",(function(){a.Dc(t);const i=a.Ac(14);return e.goNext(i)})),a.Lc(47,"Continue"),a.Xb(),a.Xb(),a.Yb(48,"mdb-step",26),a.Yb(49,"form",13),a.Yb(50,"div",1),a.Yb(51,"div",27),a.Yb(52,"div",28),a.Tb(53,"i",29),a.Tb(54,"input",30),a.Yb(55,"label",31),a.Lc(56,"Item Name"),a.Xb(),a.Jc(57,L,2,0,"mdb-error",17),a.Xb(),a.Xb(),a.Yb(58,"div",27),a.Yb(59,"div",32),a.Yb(60,"select",33),a.Yb(61,"option",34),a.Lc(62,"Select Item Type"),a.Xb(),a.Jc(63,Y,2,2,"option",35),a.Xb(),a.Jc(64,C,2,0,"mdb-error",17),a.Xb(),a.Xb(),a.Xb(),a.Yb(65,"div",1),a.Yb(66,"div",27),a.Yb(67,"div",32),a.Yb(68,"select",36),a.Yb(69,"option",34),a.Lc(70,"Select Item Size"),a.Xb(),a.Jc(71,P,2,2,"option",35),a.Xb(),a.Jc(72,F,2,0,"mdb-error",17),a.Xb(),a.Xb(),a.Xb(),a.Yb(73,"div",1),a.Yb(74,"div",37),a.Yb(75,"label"),a.Lc(76,"Other to pick"),a.Xb(),a.Xb(),a.Yb(77,"div",38),a.Yb(78,"mdb-checkbox",39),a.gc("click",(function(t){return t.stopPropagation()}))("change",(function(t){return e.checkboxToPick(t)})),a.Xb(),a.Xb(),a.Xb(),a.Jc(79,N,13,2,"div",40),a.Yb(80,"button",41),a.gc("click",(function(){return a.Dc(t),a.Ac(14).previous()})),a.Lc(81,"Back"),a.Xb(),a.Yb(82,"button",42),a.gc("click",(function(){return e.dropItemNow()})),a.Jc(83,E,2,0,"span",17),a.Jc(84,R,3,0,"span",17),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Xb(),a.Xb()}2&t&&(a.Db(12),a.pc("ngIf",e.submitting),a.Db(1),a.pc("linear",!0),a.Db(2),a.pc("editable",!e.submitting),a.Db(1),a.pc("ngIf",e.loading),a.Db(3),a.pc("formGroup",e.searchForm),a.Db(5),a.pc("ngIf",e.isInvalidShopName),a.Db(18),a.pc("ngForOf",e.nearestShops),a.Db(2),a.Mc(e.search_shop_label),a.Db(1),a.pc("maxSize",e.MAX_SIZE)("totalItems",e.page.totalElements)("ngModel",e.page.pageNumber)("itemsPerPage",e.page.size),a.Db(1),a.pc("disabled",!e.shopSelected),a.Db(2),a.pc("stepForm",e.itemInfoForm),a.Db(1),a.pc("formGroup",e.itemInfoForm),a.Db(8),a.pc("ngIf",e.isInvalidItemName),a.Db(6),a.pc("ngForOf",e.itemTypes),a.Db(1),a.pc("ngIf",e.isInvalidItemType),a.Db(7),a.pc("ngForOf",e.itemSizes),a.Db(1),a.pc("ngIf",e.isInvalidItemSize),a.Db(6),a.pc("checked",!1),a.Db(1),a.pc("ngIf",e.otherToPick),a.Db(1),a.pc("disabled",e.submitting),a.Db(2),a.pc("disabled",!e.itemInfoForm.valid||e.submitting||!e.shopSelected),a.Db(1),a.pc("ngIf",!e.submitting),a.Db(1),a.pc("ngIf",e.submitting))},directives:[o.j,n.E,n.D,S.u,S.l,S.f,S.b,n.C,n.G,S.k,S.e,o.i,w.a,S.m,n.w,S.r,S.n,S.t,n.i,n.M,n.A],styles:[".card-body[_ngcontent-%COMP%]{padding-left:0;padding-right:0}@media only screen and (max-width:600px){.drop_item[_ngcontent-%COMP%]{padding:unset;padding-top:4rem}.card-body[_ngcontent-%COMP%]{padding-left:0;padding-right:0}}"]}),t})()},{path:"list",component:r.a},{path:"near-shops",component:v}];let z=(()=>{class t{}return t.\u0275mod=a.Qb({type:t}),t.\u0275inj=a.Pb({factory:function(e){return new(e||t)},imports:[[s.i.forChild(V)],s.i]}),t})();i("8LU1"),i("cH1L"),i("nLfN"),i("XNiG"),i("2Vo4"),i("7+OI"),i("LRne"),i("1G5W");let A=(()=>{class t{}return t.\u0275mod=a.Qb({type:t}),t.\u0275inj=a.Pb({factory:function(e){return new(e||t)}}),t})();var W=i("FKr1");i("quSY"),i("VRyK"),i("itXk"),i("lJxs");let q=(()=>{class t{}return t.\u0275mod=a.Qb({type:t}),t.\u0275inj=a.Pb({factory:function(e){return new(e||t)},imports:[[A,W.a],W.a]}),t})();i("R1ws");var J=i("GU7r");i("u47x");let B=(()=>{class t{}return t.\u0275mod=a.Qb({type:t}),t.\u0275inj=a.Pb({factory:function(e){return new(e||t)}}),t})(),U=(()=>{class t{}return t.\u0275mod=a.Qb({type:t}),t.\u0275inj=a.Pb({factory:function(e){return new(e||t)},imports:[[W.c,W.a,J.c,B],W.a,B]}),t})(),G=(()=>{class t{}return t.\u0275mod=a.Qb({type:t}),t.\u0275inj=a.Pb({factory:function(e){return new(e||t)},imports:[[o.b,z,S.g,S.q,n.r.forRoot(),n.J,n.N,n.f,n.K,n.a,n.g,n.b,n.o,n.n,n.l,n.j,c.a.forRoot({apiKey:"AIzaSyC_2bjO2wL-sv-Gaq94-j63rHm2Jo8SJB8",libraries:["places"]}),g,n.j,q,U,w.b,n.k]]}),t})()}}]);